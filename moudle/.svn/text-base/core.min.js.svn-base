function isCP(n){return!n||typeof n!="string"?!1:n.substr(0,2)=="08"?!0:!1}function isTH(n){return!n||typeof n!="string"?!1:n.substr(0,8)=="01010202"?!0:!1}function isSL(n){return!n||typeof n!="string"?!1:n.substr(0,4)=="0201"?!0:!1}function isKL(n){return!n||typeof n!="string"?!1:n.substr(0,4)=="0202"?!0:!1}function getOneStore_ID(){var n="";return $.each(my.stores,function(){return n=this.store_id,!1}),n}function getOneStore_ID_All(){var n="";return $.each(my.allStores,function(){return n=this.store_id,!1}),n}function getOneBag_ID(){var n="";return $.each(my.bags,function(){return n=this.bag_id,!1}),n}function getOneChejian_ID(){var n="";return $.each(my.chejians,function(){return n=this.chejian_id,!1}),n}function getDepartmentName(n){var t="";return $.each(my.departments,function(){if(this.id==n)return t=this.department}),t}function getStoreName(n){var t="";return $.each(my.stores,function(){if(this.store_id==n)return t=this.store_name}),t?t:n}function getChejianName(n){var t="";return $.each(my.chejians,function(){if(this.chejian_id==n)return t=this.chejian_name}),t}function getBagName(n){var t="";return $.each(my.bags,function(){if(this.bag_id==n)return t=this.bag_name}),t}function getStoreZujin(n){var t="";return $.each(my.stores,function(){if(this.store_id==n)return t=this.area}),t}function getStoreArea(n){var t="";return $.each(my.stores,function(){if(this.store_id==n)return t=this.area}),t}function getStoreAreaAvg(n){var t=0;return $.each(my.stores,function(){var i=this;$.each(n,function(){i.store_id==this&&(t=t+parseFloat(i.area))})}),t}function div(n,t,i){if((n=parseFloat(n),t=parseFloat(t),!n||!t)||t==0)return"--";var r=n/t;return i?dot(r,i):r}function mul(n,t){return(n=parseFloat(n),t=parseFloat(t),!n||!t)?"--":n*t}function add(n,t){var r,u,i;try{r=n.toString().split(".")[1].length}catch(f){r=0}try{u=t.toString().split(".")[1].length}catch(f){u=0}return i=Math.pow(10,Math.max(r,u)),(n*i+t*i)/i}function sub(n,t){var i,r,u,f;try{i=n.toString().split(".")[1].length}catch(e){i=0}try{r=t.toString().split(".")[1].length}catch(e){r=0}return u=Math.pow(10,Math.max(i,r)),f=i>=r?i:r,((n*u-t*u)/u).toFixed(f)}function dot(n,t){if(!n)return"--";var i=n.toString(),r=i.indexOf(".");return(r>0&&(i=i.substr(0,r+1)+i.substr(r+1,t)),i=parseFloat(i),!i)?"--":i}function per(n,t,i){if(!t)return"--";var r=n*100/t;return(i||(i=4),i&&(r=r.toFixed(i)),!parseFloat(r))?"--":r==Infinity?"--":r+"%"}function d(n){alert($.toJSON(n))}function makePy(n){var i,t,r,u;if(typeof n!="string")throw new Error(-1,"函数makePy需要字符串类型参数!");for(i=[],t=0,r=n.length;t<r;t++)u=n.charAt(t),i.push(checkCh(u));return mkRslt(i)}function checkCh(n){var t=n.charCodeAt(0);return t>40869||t<19968?n:oMultiDiff[t]?oMultiDiff[t]:strChineseFirstPY.charAt(t-19968)}function mkRslt(n){for(var r,o,t,s,u,f,i=[""],e=0,h=n.length;e<h;e++)if(r=n[e],o=r.length,o==1)for(t=0;t<i.length;t++)i[t]+=r;else for(s=i.slice(0),i=[],t=0;t<o;t++){for(u=s.slice(0),f=0;f<u.length;f++)u[f]+=r.charAt(t);i=i.concat(u)}return i}var strChineseFirstPY,oMultiDiff;(function(){var n={fn:new Function,create:function(t,i){var r=i;return t&&n.inherit(r,t),r},inherit:function(n,t){var i=new Function;i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n;n.superclass=t.prototype;n.prototype.constructor==Object.prototype.constructor&&(n.prototype.constructor=t)},extend:function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},copy:function(t,i,r){var e,u,f;if(typeof t!="object")return t;if(e=t.valueOf(),t!=e)return new t.constructor(e);if(t instanceof t.constructor&&t.constructor!==Object){f=i?new i:n.clone(t.constructor.prototype);for(u in t)(i||t.hasOwnProperty(u))&&(f[u]=t[u])}else{f={};for(u in t)f[u]=t[u]}if(r)for(u in r)f[u]=r[u];return f},clone:function(t){return n.__cloneFunc.prototype=t,new n.__cloneFunc},__cloneFunc:function(){},delegate:function(n,t){if(t=t||window,arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return function(){return n.apply(t,i)}}return function(){return n.call(t)}},moudle:[]};window.my=window.my||n})(),function(){var n={list:[],index:0,add:function(n,t){this.index++;var i='<div class="notice"><h4><a class="ico ico_notice"><\/a><span>'+n+'<\/span><a class="ico ico_notice_arrow"><\/a><\/h4><\/div>';$(".nav").append(i);$(".nav h4").click(function(){t&&typeof t=="function"&&t()});$(".notice h4").bind("mouseover",function(){$(".notice .ico_notice_arrow")[0].style.cssText+="-webkit-transform: rotate(90deg);-moz-transform: rotate(90deg);";$(this).height($("span",this).outerHeight()+13)});$(".notice h4").bind("mouseout",function(){$(".notice .ico_notice_arrow")[0].style.cssText+="-webkit-transform: rotate(0deg);-moz-transform: rotate(0deg);";$(this).height("28px")})},remove:function(){},clear:function(){$(".notice").length>0&&$(".notice").remove()}};my.notice=n}();my.table=function(){};my.table.prototype={title:"",tips:"",year:"",month:"",store:"",store_id:null,config:{},current_quick:"",quick:[],jsurl:"",method:"",arges:{},page:1,output:1,selection:"tr",startday:"",endday:"",data:{},async:{},init:function(){},initData:function(n){this.data=n},bindEvent:function(){},getData:function(n){var t=this;if(!this.method){n&&typeof n=="function"&&n();return}my.util.send(this.method,this.arges,function(i){t.initData(i);try{}catch(r){return my.view.message("该报表数据处理出错，请联系管理员！")}n&&typeof n=="function"&&n()})},getTableHtml:function(){var t=this,n;return this.data.sortBy=this.sortBy,this.data.sortStatus=this.sortStatus,n=my.debug?get_template_html(this.template_url+"?t="+Math.random()):get_template_html(this.template_url+"?ver="+version),template(n,this.data)},getTitle:function(){return this.title?this.title.replace(/{year}/g,this.year).replace(/{month}/g,this.month).replace(/{store_name}/g,getStoreName(this.store_id)).replace(/{startday}/g,this.startday).replace(/{endday}/g,this.endday).replace(/{dayopt}/g,this.dayopt):""},getTips:function(){return this.tips},changeStore:function(n){this.store_id=n},changeChejian:function(n){this.chejian_id=n},changeBag:function(n){this.bag_id=n},changeYear:function(n){this.year=n},changeMonth:function(n){this.month=n;this.dayopt&&(this.dayopt=1)},changeDay:function(n){this.dayopt=n},changeType:function(){},setPerpage:function(n){n||(n=10);this.perpage=n},setPage:function(n){n||(n=1);this.page=n},changeStartDay:function(n){this.startday=n},changeEndDay:function(n){this.endday=n},sort:function(n,t){n&&(this.sortBy=n,this.sortStatus=t,this.data.list.sort(function(i,r){return t?r[n]-i[n]:i[n]-r[n]}))},runThread:function(n){$.each(this.async,function(){this.status||(this.func(n),this.status=1)})},endThread:function(n){this.async[n].status=2},chkThread:function(){var n=!1;return $.each(this.async,function(){if(this.status==1||!this.status)return n=!0,!0}),!n}};my.menu={config:{},currenntParent:"",currentChild:"",currentTable:"",changeParent:function(n){var i=this,t;if(!my.user.checkPower(n))return my.view.message("权限不足，请联系管理员！");t=this.getMenuHtml(n);$(".main .left .parent").length>0?($(".main .left .parent").fadeOut(300),setTimeout(function(){$(".main .left").html(t).stop().hide().fadeIn();i.bindMenuEvent()},250)):($(".main .left").html(t),$(".main .left .parent").hide().fadeIn(),i.bindMenuEvent())},bindMenuEvent:function(){var n=this;$(".left .parent li div").unbind().bind("click",function(){var t=$(this).parent().find(".child").data("type");$(".left .parent li").removeClass("current-item");$(this).parent().addClass("current-item");n.changeChild(t)});$(".child li").unbind().bind("click",function(){var t=$(this).data("type");$(".child li").removeClass("current-item");$(this).addClass("current-item");n.changeTable(t)})},changeChild:function(n){$(".left .parent .child").each(function(){var t=this;if($(this).height()>0&&$(this).data("type")!=n){if(isIE6)return $(this).height(0).hide();$(this).height(0);setTimeout(function(){$(t).hide()},300)}if($(this).data("type")==n){if($(this).height()>10)return;$(this).show().height($(this).find("li").outerHeight()*$(this).find("li").length)}})},changeTable:function(n){if(!my.user.checkPower(n))return my.view.message("权限不足，请联系管理员！");my.view.showTable(n)},getMenuHtml:function(n){var t='<ul class="parent">';return $.each(my.menu.config[n],function(i){if(this.hide||!my.user.checkPower(this.moudle))return!0;t+=i==0?'<li class="item-top">':i==my.menu.config[n].length-1?'<li class="item-bottom">':"<li>";t+='<div data-type="'+this.moudle+'"><span class="ico ico_left_'+i+'"><\/span><span class="txt">'+this.title+"<\/span><\/div>";this.child&&(t+=my.debug?'<ul class="child" data-type="'+this.moudle+'" title="'+this.moudle+'">':'<ul class="child" data-type="'+this.moudle+'">',$.each(this.child,function(){if(this.hide||!my.user.checkPower(this.moudle))return!0;t+=my.debug?'<li data-type="'+this.moudle+'" title="'+this.moudle+'">'+this.title+"<\/li>":'<li data-type="'+this.moudle+'">'+this.title+"<\/li>"}),t+="<\/ul>");t+="<\/li>"}),t+='<\/ul><div class="clear"><\/div>'}};my.menu.config={"运营部":[{title:"概况",moudle:"yy_base",child:[{title:"经营报表",moudle:"yy_base_jy"},{title:"奖励报表",moudle:"yy_base_jl",hide:!0},{title:"门店基础档案表",moudle:"yy_base_store",hide:!0},{title:"预算进度完成统计表",moudle:"yy_base_ys",hide:!0},{title:"外卖查询",moudle:"yy_wm"},{title:"财务信息报表",moudle:"yy_base_cwxx"},{title:"异动指标",moudle:"yy_base_ydzb"},{title:"特殊店",moudle:"yy_base_tsd"},{title:"百元耗电统计表",moudle:"yy_base_nhpmb"},{title:"百元耗电统计表-厨房",moudle:"yy_base_nhpmb_chufang"},{title:"百元耗电统计表-餐厅",moudle:"yy_base_nhpmb_canting"},{title:"指标综合排名表",moudle:"yy_base_zbzhpmb"},{title:"门店能耗排名表",moudle:"yy_base_mdnhpmb"},{title:"食材日定量差异表",moudle:"yy_base_scrdlcyb"}]},{title:"销售统计",moudle:"yy_sell_base",child:[{title:"销售统计表",moudle:"yy_sell"},{title:"销售统计趋势",moudle:"yy_sell_qushi"},{title:"销售统计年历表",moudle:"yy_sell_nianli"},{title:"销售统计月历表",moudle:"yy_sell_yueli"},{title:"销售统计日历表",moudle:"yy_sell_rili"}]},{title:"促销收入统计",moudle:"yy_cuxiao_base",child:[{title:"促销收入统计表",moudle:"yy_cuxiao"},{title:"促销收入统计趋势",moudle:"yy_cuxiao_qushi"},{title:"促销收入统计月历表",moudle:"yy_cuxiao_yueli"}]},{title:"收入分类统计",moudle:"yy_shouru_base",child:[{title:"收入分类统计",moudle:"yy_shouru"},{title:"收入分类统计趋势",moudle:"yy_shouru_qushi"},{title:"收入分类统计年历表",moudle:"yy_shouru_nianli"},{title:"收入分类统计月历表",moudle:"yy_shouru_yueli"}]},{title:"新品需求",moudle:"yy_newproduct_base",child:[{title:"新品需求表",moudle:"yy_newproduct"},{title:"新品需求月历表",moudle:"yy_newproduct_yueli"}]},{title:"绩效指标",moudle:"yy_jixiao_base",child:[{title:"绩效指标统计表",moudle:"yy_jixiao"},{title:"绩效指标趋势表",moudle:"yy_jixiao_qushi"},{title:"绩效指标年历表",moudle:"yy_jixiao_nianli"},{title:"绩效指标月历表",moudle:"yy_jixiao_yueli"}]},{title:"能源消耗",moudle:"yy_nengyuan_base",child:[{title:"能源消耗统计表",moudle:"yy_nengyuan"},{title:"能源消耗趋势表",moudle:"yy_nengyuan_qushi"},{title:"能源消耗月历表",moudle:"yy_nengyuan_yueli"},{title:"能源消耗日历表",moudle:"yy_nengyuan_rili"}]},{title:"会员销售",moudle:"yy_member_base",child:[{title:"会员销售统计表",moudle:"yy_member"},{title:"会员销售趋势表",moudle:"yy_member_qushi"},{title:"会员销售年历表",moudle:"yy_member_nianli"},{title:"会员销售月历表",moudle:"yy_member_yueli"},{title:"会员销售日历表",moudle:"yy_member_rili"}]},{title:"基期统计",moudle:"yy_jiqi_base",hide:!0,child:[{title:"基期统计年历表",moudle:"yy_jiqi_nianli"},{title:"基期统计月历表",moudle:"yy_jiqi_yueli"},{title:"连续三期基期统计表",moudle:"yy_jiqi_lianxu"}]},{title:"期间统计",moudle:"yy_qijian_base",hide:!0,child:[{title:"期间统计年历表",moudle:"yy_qijian_nianli"},{title:"期间统计年度表",moudle:"yy_qijian_niandu"},{title:"连续三期期间销售统计表",moudle:"yy_qijian_lianxu"}]},{title:"信息管理",moudle:"yy_info_base",child:[{title:"门店信息管理",moudle:"set_base_store"}]}],"人事部":[{title:"人员管理",moudle:"rs_person",child:[{title:"人员管理",moudle:"rs_person_list"},{title:"录入",moudle:"rs_person_add"},{title:"转正",moudle:"rs_person_zhuanzheng"},{title:"离职",moudle:"rs_person_lizhi"},{title:"晋升",moudle:"rs_person_jinsheng"},{title:"加薪",moudle:"rs_person_jiaxin"},{title:"外派",moudle:"rs_person_waipai"},{title:"请假",moudle:"rs_person_qingjia"},{title:"外借",moudle:"rs_person_waijie"}]},{title:"组织架构管理",moudle:"rs_zuzhi",child:[{title:"部门管理",moudle:"rs_bumen_list"}]},{title:"门店薪资统计",moudle:"rs_wage",child:[{title:"门店薪资统计",moudle:"rs_store_wage"}]},{title:"汇总趋势表",moudle:"rs_base",child:[{title:"汇总表",moudle:"rs_base_base"},{title:"趋势表",moudle:"rs_base_qushi"}]},{title:"历表",moudle:"rs_li",child:[{title:"日历表",moudle:"rs_li_rili"},{title:"月历表",moudle:"rs_li_yueli"},{title:"季历表",moudle:"rs_li_jili"},{title:"年历表",moudle:"rs_li_nianli"}]},{title:"信息管理",moudle:"rs_info_base",child:[{title:"门店信息管理",moudle:"set_base_store"}]}],"开发部":[{title:"汇总趋势表",moudle:"kf_base",child:[{title:"汇总表",moudle:"kf_base_base"},{title:"趋势表",moudle:"kf_base_qushi"}]},{title:"历表",moudle:"kf_li",child:[{title:"日历表",moudle:"kf_li_rili"},{title:"月历表",moudle:"kf_li_yueli"},{title:"年历表",moudle:"kf_li_nianli"}]},{title:"信息管理",moudle:"kf_info_base",child:[{title:"门店信息管理",moudle:"set_base_store"}]}],"工程部":[{title:"汇总趋势表",moudle:"gc_base",child:[{title:"汇总表",moudle:"gc_base_base"},{title:"趋势表",moudle:"gc_base_qushi"}]},{title:"历表",moudle:"gc_li",child:[{title:"日历表",moudle:"gc_li_rili"},{title:"月历表",moudle:"gc_li_yueli"},{title:"年历表",moudle:"gc_li_nianli"}]},{title:"信息管理",moudle:"gc_info_base",child:[{title:"门店信息管理",moudle:"set_base_store"}]}],"加工中心":[{title:"订单管理",moudle:"chejian_order",child:[{title:"申请订货",moudle:"chejian_order_order"},{title:"收货确认",moudle:"chejian_order_ok"},{title:"历史订单",moudle:"chejian_order_list"}]},{title:"存货盘点",moudle:"chejian_bag",child:[{title:"日结盘点登记",moudle:"chejian_bag_day"},{title:"月结盘点表",moudle:"chejian_bag_month"},{title:"历史盘点记录",moudle:"chejian_bag_list"}]},{title:"报损登记",moudle:"chejian_sun",child:[{title:"材料报损登记",moudle:"chejian_sun_cailiao"},{title:"成品报损登记",moudle:"chejian_sun_chengpin"},{title:"历史报损记录",moudle:"chejian_sun_list"}]},{title:"水电工时管理",moudle:"chejian_dian",child:[{title:"水电指数录入",moudle:"chejian_dian_input"},{title:"水电参数设置",moudle:"chejian_dian_price"},{title:"工时管理",moudle:"chejian_gongshi"}]},{title:"汇总趋势表",moudle:"jg_base",child:[{title:"汇总表",moudle:"jg_base_base"},{title:"趋势表",moudle:"jg_base_qushi"}]},{title:"历表",moudle:"jg_li",child:[{title:"日历表",moudle:"jg_li_rili"},{title:"月历表",moudle:"jg_li_yueli"},{title:"季历表",moudle:"jg_li_jili"},{title:"年历表",moudle:"jg_li_nianli"}]}],"门店":[{title:"订单管理",moudle:"store_order",child:[{title:"申请订货",moudle:"store_order_order"},{title:"收货确认",moudle:"store_order_ok"},{title:"历史订单",moudle:"store_order_list"},{title:"调入调出明细",moudle:"store_db_more"},{title:"调入调出汇总",moudle:"store_db_total"}]},{title:"存货盘点",moudle:"store_bag",child:[{title:"日结盘点登记",moudle:"store_bag_day"},{title:"月结盘点表",moudle:"store_bag_month"},{title:"历史盘点记录",moudle:"store_bag_list"}]},{title:"报损登记",moudle:"store_sun",child:[{title:"材料报损登记",moudle:"store_sun_cailiao"},{title:"成品报损登记",moudle:"store_sun_chengpin"},{title:"历史报损记录",moudle:"store_sun_list"}]},{title:"水电录入",moudle:"store_dian",child:[{title:"水电指数录入",moudle:"store_dian_input"},{title:"水电参数设置",moudle:"store_dian_price"}]},{title:"会展客诉工时管理",moudle:"huizhan_kesu",child:[{title:"会展收入管理",moudle:"store_dian_huizhan"},{title:"客诉数量管理",moudle:"store_dian_kesu"},{title:"工时管理",moudle:"store_dian_gongshi"}]},{title:"小时工管理",moudle:"store_renshi",child:[{title:"小时工管理",moudle:"store_renshi_list"},{title:"小时工录入",moudle:"store_renshi_add"}]},{title:"成本分析",moudle:"caiwu_chengben",child:[{title:"食材实际成本表",moudle:"caiwu_chengben_shicai"},{title:"成品定额成本表",moudle:"caiwu_chengben_cpde"},{title:"成品月度成本表",moudle:"caiwu_chengben_cpmonth"},{title:"食材月度成本表",moudle:"caiwu_chengben_shicaimonth"},{title:"食材日定量差异表",moudle:"caiwu_chengben_shicairi"},{title:"食材单价录入",moudle:"caiwu_chengben_shicaidanjiaadd"}]}],"仓库":[{title:"发货管理",moudle:"bag_order",child:[{title:"处理订货单",moudle:"bag_order_send"},{title:"收货单审核",moudle:"bag_order_pass"},{title:"出库单记录",moudle:"bag_order_list"}]},{title:"补发退库",moudle:"bag_bu",child:[{title:"历史记录",moudle:"bag_order_listbu"},{title:"补发出库单",moudle:"bag_order_bu"},{title:"退库出库单",moudle:"bag_order_tui"}]},{title:"工时管理",moudle:"bag_gs",child:[{title:"工时管理",moudle:"bag_gongshi"}]}],"财务部":[{title:"订单管理",moudle:"caiwu_order",child:[{title:"总部需求订单",moudle:"caiwu_order_list"},{title:"直供需求订单",moudle:"caiwu_order_zg"},{title:"调入调出订单",moudle:"caiwu_order_db"},{title:"盘点订单",moudle:"caiwu_order_pd"},{title:"材料报损订单",moudle:"caiwu_order_bs"},{title:"成品报损订单",moudle:"caiwu_order_cpbs"},{title:"补发出库单",moudle:"caiwu_order_bf"},{title:"退库出库单",moudle:"caiwu_order_tk"}]},{title:"调入调出",moudle:"caiwu_diaoru",child:[{title:"月度调入调出明细",moudle:"store_db_more"},{title:"月度调入调出汇总",moudle:"store_db_total"}]},{title:"预算分类管理",moudle:"caiwu_yusuan",child:[{title:"预算项目分类",moudle:"caiwu_yusuan_type"},{title:"预算项目明细",moudle:"caiwu_yusuan_type_more"}]},{title:"预算数据管理",moudle:"caiwu_data",child:[{title:"预算数据管理",moudle:"caiwu_data_manage"},{title:"预算执行情况",moudle:"caiwu_data_do"}]}],"系统配置":[{title:"基础配置",moudle:"set_base",child:[{title:"基础表配置",moudle:"set_base_dian"},{title:"门店水电表配置",moudle:"store_dian_set"},{title:"车间水电表配置",moudle:"chejian_dian_set"}]},{title:"帐号权限",moudle:"set_user",child:[{title:"用户管理",moudle:"set_base_user"},{title:"用户组管理",moudle:"set_base_userlevel"}]},{title:"门店管理",moudle:"set_store",child:[{title:"门店管理",moudle:"set_base_store"},{title:"订货分类管理",moudle:"set_order_type"}]},{title:"仓库管理",moudle:"set_bag",child:[{title:"仓库管理",moudle:"set_bag_manage"}]},{title:"加工中心管理",moudle:"set_chejian",child:[{title:"车间管理",moudle:"set_chejian_manage"},{title:"订货分类管理",moudle:"set_chejian_type"}]},{title:"其他",moudle:"set_other",child:[{title:"销售数据更新管理",moudle:"set_other_update"}]}]};my.view={showTable:function(n,t,i){var u=this,f="view/"+n+".js?ver="+version,r;my.debug&&(f+="?t="+Math.random());my.moudle[n]||my.util.getScript(f,!1);my.moudle&&my.moudle[n]&&(r=my.moudle[n],t||(r.sortBy=null,r.sortStatus=null),r.init(i),u.load(!0),t?u.freshTable(n):r.getData(function(){u.freshTable(n)}))},freshTable:function(n,t){var r=this,u,i=my.moudle[n];if(r.load(!1),t){if(isIE6)return my.view.message("不支持IE6查看图表功能，请升级浏览器！");u='<table class="data-load"  border="0" cellspacing="0" cellpadding="0" ><tr><td><div id="data_graph"><\/div><\/td><\/tr><\/table>'}else u=i.getTableHtml();r.setOptYear(i.year,my.util.getYearList());r.setOptMonth(i.month,my.util.getMonthList(i.year));r.setOptDay(i.dayopt,my.util.getDateList(i.year,i.month));r.setOptStore(i.store_id,my.allStores,i.is_allStore);r.setOptChejian(i.chejian_id,my.chejians);r.setOptBag(i.bag_id,my.bags);r.initTable(n);r.setTableContent(u,"",function(){r.setTableTips(i.getTips());r.setStartDay(i.startday,i.endday);r.checkOptions();r.setOutput(i.output,t);r.setQuick(i.current_quick,i.quick);r.setTableTitle(i.getTitle());t?r.bindTableEvent():r.bindTableEvent(i.selection);i.bindEvent();i.chkThread()||t?(t&&i.getGraph(),r.setGraphBtn(i)):i.runThread(function(){var t=$("#data").data("value");n==t&&r.freshTable(t)})})},setGraphBtn:function(n){if($(".graph").length>0&&$(".graph").remove(),n.getGraph){var t=!1;$("#data_graph").length>0&&(t=!0);$(".right .box_title").append('<span class="graph"><a data-type="list" class="current-item">列表<\/a><a data-type="graph" href="javascript:void(0)">图表<\/a><\/span>');t&&($(".right .box_title .graph a").removeClass("current-item"),$(".right .box_title .graph a").eq(1).addClass("current-item"));$(".right .box_title .graph a").eq(0).click(function(){var n=$("#data").data("value");my.view.freshTable(n)});$(".right .box_title .graph a").eq(1).click(function(){var n=$("#data").data("value");my.view.freshTable(n,1)})}},setOutput:function(n,t){($(".right .box_head .export").remove(),t)||n&&($(".right .box_head").append('<div class=export><span class="ico ico_export" title="导出Excel"><\/span><\/div>'),$(".right .box_head .export").bind("click",function(){my.view.saveToExcel()}))},setQuick:function(n,t){var r=this,i;($(".right .box_head .option").remove(),$.isEmptyObject(t))||(i=document.createElement("div"),i.className="option",$.each(t,function(t,u){var f=document.createElement("li"),e;n==t&&(f.className="current-item");f.innerHTML=t;e=u;typeof e=="string"&&(f.onclick=function(){r.showTable(e)});typeof e=="function"&&(f.onclick=function(){e()});i.appendChild(f)}),$(".right .box_head").append(i))},initTable:function(n){if($("#data").length==0){var t='<div class="box"><div class="box_head"><div class="box_title"><span><\/span><\/div><div class=option><li><\/li><\/div><\/div>                    <div class="box_body" id="box_body">                        <div id="data" data-value="'+n+'">                        <\/div>                    <\/div>                <\/div>';$(".right").append(t)}else $("#data").data("value",n)},checkOptions:function(){$(".right .options").html()==""&&($(".right .options").remove(),$(".right").css("padding-top","0px"))},setTableTips:function(n){($(".box_title .tips").remove(),n&&n!="")&&$(".box_title").append('<a class="ico tips"><div class="tips_content"><div class="tips_arrow">◆<\/div>'+n+"<\/div><\/a>")},setOptions:function(){$(".right .options").length>0||($(".right .box").hide(),$(".right").prepend('<div class="options"><\/div>').css("padding-top","40px"),$(".right .box").show())},setStartDay:function(n,t){if($(".right .options .op_startday").remove(),n&&t){$(".right .options").length==0&&this.setOptions();var i="";i+='<div class="op_startday">';i+='日期范围：<input type="text" value="'+n+'" onfocus="WdatePicker()" id="startday" readonly> - ';i+='<input type="text" value="'+t+'" onfocus="WdatePicker()" id="endday" readonly> <span class="submit_day">确定<\/span><\/div>';$(".right .options").append(i)}},setOptYear:function(n,t){if($(".right .options .year").remove(),n){$(".right .options").length==0&&this.setOptions();var i="",r="";i+='<div class="op year">';$.each(t,function(){n==this.value?(i+="<span>"+this.title+'<div class="ico ico_pulldown"><\/div><\/span><ul>',r+='<li data-value="'+this.value+'" data-type="year" class="current-item">'+this.title+"<\/li>"):r+='<li data-value="'+this.value+'" data-type="year">'+this.title+"<\/li>"});i+=r+"<\/ul><\/div>";$(".right .options").append(i)}},setOptMonth:function(n,t){if($(".right .options .month").remove(),n){$(".right .options").length==0&&this.setOptions();var i="",r="";i+='<div class="op month">';$.each(t,function(){n==this.value?(i+="<span>"+this.month+'<div class="ico ico_pulldown"><\/div><\/span><ul>',r+='<li data-value="'+this.value+'" data-type="month" class="current-item">'+this.month+"<\/li>"):r+='<li data-value="'+this.value+'" data-type="month">'+this.month+"<\/li>"});i+=r+"<\/ul><\/div>";$(".right .options").append(i)}},setOptDay:function(n,t){if($(".right .options .day").remove(),n){$(".right .options").length==0&&this.setOptions();var i="",r="";i+='<div class="op day">';$.each(t,function(){n==this.value?(i+="<span>"+this.title+'<div class="ico ico_pulldown"><\/div><\/span><ul>',r+='<li data-value="'+this.value+'" data-type="dayopt" class="current-item">'+this.title+"<\/li>"):r+='<li data-value="'+this.value+'" data-type="dayopt">'+this.title+"<\/li>"});i+=r+"<\/ul><\/div>";$(".right .options").append(i)}},setOptBag:function(n,t){if($(".right .options .bag").remove(),n){$(".right .options").length==0&&this.setOptions();var i="",r="";if(typeof n=="string"){i+='<div class="op bag">';$.each(t,function(){n==this.bag_id?(i+="<span>"+this.bag_name+'<div class="ico ico_pulldown"><\/div><\/span><ul>',r+='<li data-value="'+this.bag_id+'" data-type="bag" class="current-item">'+this.bag_name+"<\/li>"):r+='<li data-value="'+this.bag_id+'" data-type="bag">'+this.bag_name+"<\/li>"});i+=r+"<\/ul><\/div>";$(".right .options").append(i);return}}},setOptChejian:function(n,t){if($(".right .options .chejian").remove(),n){$(".right .options").length==0&&this.setOptions();var i="",r="";if(typeof n=="string"){i+='<div class="op chejian">';$.each(t,function(){n==this.chejian_id?(i+="<span>"+this.chejian_name+'<div class="ico ico_pulldown"><\/div><\/span><ul>',r+='<li data-value="'+this.chejian_id+'" data-type="chejian" class="current-item">'+this.chejian_name+"<\/li>"):r+='<li data-value="'+this.chejian_id+'" data-type="chejian">'+this.chejian_name+"<\/li>"});i+=r+"<\/ul><\/div>";$(".right .options").append(i);return}}},setOptStore:function(n,t,i){if($(".right .options .op_store").remove(),$(".right .options .store").remove(),n){$(".right .options").length==0&&this.setOptions();var r="",u="",f="",e=!1;if(typeof n=="string"||typeof n=="number"){r+='<div class="op store">';$.each(t,function(){!i&&this.store_id>8e3||(n==this.store_id?(r+="<span>"+this.store_name+'<div class="ico ico_pulldown"><\/div><\/span><ul>',u+='<li data-value="'+this.store_id+'" data-type="store" class="current-item">'+this.store_name+"<\/li>"):u+='<li data-value="'+this.store_id+'" data-type="store">'+this.store_name+"<\/li>")});r+=u+"<\/ul><\/div>";$(".right .options").append(r);return}r+='<div class="op_store">';r+="<span>选择分店 <font color=blue><b>["+n.length+']<\/b><\/font> <div class="ico ico_pulldown"><\/div><\/span><ul>';stNo=1;$.each(my.citys,function(){f=this;e=!1;u="";$.each(t,function(){if(i||!(this.store_id>8e3)){if(this.city!=f)return!0;$.inArray(this.store_id.toString(),n)!=-1?(u+='<div class="city_li"><input id="ck_'+this.store_id+'" type="checkbox" value="'+this.store_id+'" checked><label for="ck_'+this.store_id+'">'+this.store_name+"<\/label><\/div>",e=!0):u+='<div class="city_li"><input id="ck_'+this.store_id+'" type="checkbox" value="'+this.store_id+'"><label for="ck_'+this.store_id+'">'+this.store_name+"<\/label><\/div>"}});r+=e?'<li data-type="store"><input id="ck_store'+stNo+'" type="checkbox" class="selectcity" checked><label for="ck_store'+stNo+'">'+f+'<\/span><div class="citylist"><div class="arrow">◀<\/div>':'<li data-type="store"><input id="ck_store'+stNo+'" type="checkbox" class="selectcity"><label for="ck_store'+stNo+'">'+f+'<\/span><div class="citylist"><div class="arrow">◀<\/div>';r+=u+"<\/div><\/li>";stNo++});r+='<li><input type="checkbox" class="selectcityall" id="selectcityall"><label for="selectcityall">全选<\/label><\/li><li style="text-align:center;"><div class="city_submit">确定<\/div><\/li><\/ul><\/div>';$(".right .options").append(r)}},setTableTitle:function(n){$(".right .box_title span").eq(0).html(n)},setTableContent:function(n,t,i){if($("#data").html()==""){typeof n=="string"?$("#data").html(n).hide().fadeIn():$("#data").append(n).hide().fadeIn();i&&typeof i=="function"&&i();return}$("#data").fadeOut(300);setTimeout(function(){typeof n=="string"?$("#data").html(n).stop().hide().fadeIn():$("#data").html("").append(n).stop().hide().fadeIn();i&&typeof i=="function"&&i()},250)},bindTableEvent:function(n){var t=this,i=null,r=$("#data");n&&($(n,r).bind("mouseover",function(){n.indexOf("tr")>-1?$("td",this).css("background-color","#D3F0F1"):($(this).data("bgcolor",$(this).css("background-color")),$(this).css("background-color","#D3F0F1"))}),$(n,r).bind("mouseout",function(){n.indexOf("tr")>-1?$("td",this).css("background-color","#fff"):$(this).css("background-color",$(this).data("bgcolor"))}));$("#data .ico_down,#data .ico_up,#data .ico_default").click(function(){var n=$("#data").data("value"),i=$(this).data("type");$(this).hasClass("ico_up")?(my.moudle[n].sort(i,0),t.showTable(n,1)):(my.moudle[n].sort(i,1),t.showTable(n,1))});$(".op_store ul li").bind("mouseover",function(){$(".citylist",this).show()});$(".op_store ul li").bind("mouseout",function(){$(".citylist",this).hide()});$(".op_store").bind("click",function(n){var r=this;(n.stopPropagation(),$(this).outerHeight()>30)||($(this).height(30+$(this).find("ul").outerHeight()),i=setTimeout(function(){$(r).css("overflow","visible")},300),$(document).bind("click",function(){clearTimeout(i);$(r).stop().height(28).css("overflow","hidden");$(document).unbind("click");var n=$("#data").data("value"),u=[];($(".op_store .citylist input").each(function(){$(this).attr("checked")&&u.push($(this).val())}),u.sort().toString()!=my.moudle[n].store_id.sort().toString())&&(my.moudle[n].changeStore(u),t.showTable(n))}))});$(".selectcityall").click(function(){$(this).attr("checked")?$(".op_store input").attr("checked",!0):$(".op_store input").attr("checked",!1)});$(".op_store .selectcity").click(function(){$(this).attr("checked")?$(this).parent().find(".citylist input").attr("checked",!0):$(this).parent().find(".citylist input").attr("checked",!1)});$(".op_store .citylist input").click(function(){$(this).attr("checked")?$(this).parent().parent().parent().find(".selectcity").attr("checked",!0):($(this).parent().parent().parent().find(".selectcity").attr("checked",!1),$(this).parent().parent().find("input").each(function(){$(this).attr("checked")&&$(this).parent().parent().parent().find(".selectcity").attr("checked",!0)}))});$(".op span").unbind().bind("click",function(n){var t=30,i=this;$(this).parent().outerHeight()>t?($(this).parent().height(t-2),n.stopPropagation(),n.preventDefault(),$(document).unbind("click")):($(this).parent().height(t+$(this).parent().find("ul").outerHeight()),$(document).trigger("click"),$(document).bind("click",function(){$(i).trigger("click")}),n.stopPropagation(),n.preventDefault())});$(".op_store .city_submit").click(function(){var n=$("#data").data("value"),i=[];$(document).unbind("click");$(".op_store .citylist input").each(function(){$(this).attr("checked")&&i.push($(this).val())});my.moudle[n].changeStore(i);t.showTable(n)});$(".op_startday .submit_day").click(function(){var i=$("#data").data("value"),r=$("#startday").val(),u=$("#endday").val(),n=new Date;if(n.setDate(n.getDate()-1),r>n.format("yyyy-MM-dd")||u>n.format("yyyy-MM-dd"))return my.view.message("只能查询今日之前的数据！");if(r>u)return my.view.message("日期范围错误！");my.moudle[i].changeStartDay(r);my.moudle[i].changeEndDay(u);t.showTable(i)});$(".op ul li").unbind().bind("click",function(){var n=$("#data").data("value"),i=$(this).data("type"),r=$(this).data("value");i=="month"?my.moudle[n].changeMonth(r):i=="year"?my.moudle[n].changeYear(r):i=="dayopt"?my.moudle[n].changeDay(r):i=="store"?my.moudle[n].changeStore(r):i=="chejian"?my.moudle[n].changeChejian(r):i=="bag"&&my.moudle[n].changeBag(r);t.showTable(n);$(this).parent().parent().find("span").html($(this).html()+'<div class="ico ico_pulldown"><\/div>');$(this).parent().find(".current-item").removeClass("current-item");$(this).addClass("current-item")});$(".tips").unbind().bind("mouseover click",function(){$("div",this).stop().show()});$(".tips").bind("mouseout",function(){$("div",this).stop().hide()})},message:function(n,t,i){var r=this;this.load(!0);$("#message,#fullbg").unbind().bind("click",function(){t==1&&i&&typeof i=="function"&&i();r.load(!1)});var u=($(window).height()-$("#message").height())/2,f=($(window).width()-$("#message").width())/2,e=$(document).scrollTop(),o=$(document).scrollLeft();$("#message").css({position:"absolute",top:u+e,left:f+o}).html('<div class="message_title">系统提示<\/div><div style="height:160px;"><table border=0 align="center" width="200" height=100%><tr><td >'+n+" <a >[点击关闭]<\/a><\/td><\/tr><\/table><\/div>")},load:function(n){if(n){$("#fullbg").height($(document).height()).unbind();$("#fullbg").show();$("#message").fadeIn();var t=($(window).height()-$("#message").height())/2,i=($(window).width()-$("#message").width())/2,r=$(document).scrollTop(),u=$(document).scrollLeft();$("#message").unbind().css({position:"absolute",top:t+r,left:i+u}).html('<div class="message_title">系统提示<\/div><div style="height:160px;"><table border=0 align="center" width="200" height=100%><tr><td align="right" width="50"><img src="images/loading.gif" width="30"><\/td><td>数据加载中，请稍候……<\/td><\/tr><\/table><\/div>')}else $("#fullbg").stop().hide(),$("#message").stop().fadeOut()},showLogin:function(){if(!($(".login").length>0)){$(".nav").length>0&&($(".nav").remove(),$(".doc").remove(),$(".footer").remove());my.moudle=[];$(".top").after('<ul class="login"><form id="loginform" onsubmit="return false;">                <li>                    <input type="text" name="user_name" class="input" placeholder="用户名" id="user_name" /><\/li>                <li>                    <input type="password" name="password" class="input" placeholder="密码" id="password" /><\/li>                <li>                    <input type="submit" value="登&nbsp;录" class="submit" accesskey="l" id="submit" /><\/form>                <\/li>        <\/ul>');$("#loginform").bind("submit",function(){var n=$("#user_name").val(),t=$("#password").val();return my.view.load(1),my.user.login(n,t,function(){my.view.load(0);my.view.showMain()},function(){my.view.message("登录失败，请检查用户名和密码后重试！")}),!1});my.util.getCookie("loginid")&&($("#user_name").val(my.util.getCookie("loginid")),my.view.load(1),my.user.chkLoginStatus(function(){my.view.load(0);my.view.showMain()},function(){my.view.load(0)}))}},showMain:function(){if($(".nav").length>0){my.view.showTable("main");return}my.moudle=[];$(".login").fadeOut(500);setTimeout(function(){$(".login").remove();var n="用户名："+my.user.info.loginid+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;姓名："+my.user.info.user_name+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;部门："+my.user.info.bumen;my.user.info.bumen=="门店"&&(n+=" "+getStoreName(my.user.info.store_id));n+=" <a >退出<\/a>";$(".top .user").html(n);$(".top .user a").unbind().bind("click",function(){my.view.load("on");my.user.logout(function(){$(".top .user").html("当前帐号：游客");my.view.load("off");my.view.showLogin()})});$(".top").after('<ul class="nav">                        <li data-type="运营部"><span class="ico ico1"><\/span><span class="txt">运营部<\/span><\/li>                        <li data-type="人事部"><span class="ico ico2"><\/span><span class="txt">人事部<\/span><\/li>                        <li data-type="开发部"><span class="ico ico3"><\/span><span class="txt">开发部<\/span><\/li>                        <li data-type="工程部"><span class="ico ico4"><\/span><span class="txt">工程部<\/span><\/li>                        <li data-type="加工中心"><span class="ico ico5"><\/span><span class="txt">加工中心<\/span><\/li>                        <li data-type="门店"><span class="ico ico7"><\/span><span class="txt">门店<\/span><\/li>                        <li data-type="仓库"><span class="ico ico8"><\/span><span class="txt">仓库<\/span><\/li>                        <li data-type="财务部"><span class="ico ico9"><\/span><span class="txt">财务部<\/span><\/li>                        <li data-type="系统配置"><span class="ico ico6"><\/span><span class="txt">系统配置<\/span><\/li>                    <\/ul>                    <div class="doc">                        <div class="left">                        <\/div>                        <div class="right">                        <\/div>                        <div class="clear"><\/div>                    <\/div>                    <div class="clear"><\/div>                    <div class="footer">                        © 2013&nbsp;&nbsp;&nbsp;&nbsp;山西和合谷餐饮有限公司&nbsp;&nbsp;&nbsp;&nbsp;All Rights Reserved<br>                        技术支持：YinG&nbsp;&nbsp;&nbsp;&nbsp;E-mail：<a href="mailto:33098184@qq.com">33098184@qq.com<\/a>                    <\/div>        ');$(".nav li").each(function(){$(this).data("type")==my.user.bumen&&$(this).addClass("current-item")});$(".nav li").unbind().bind("click",function(){var n=$(this).data("type");$(".nav li").removeClass("current-item");$(this).addClass("current-item");my.menu.changeParent(n)});my.menu.changeParent(my.user.info.bumen);my.view.showTable("main");my.user.chkTask()},400)},saveToExcel:function(){var i=$(".box_title span").html(),r=my.util.getJsonTableData("data"),n=document.createElement("form"),t;n.action="api/excel.php";n.method="post";n.style.display="none";t=document.createElement("input");t.name="array";t.value=my.util.toJson({title:i,table:r});n.appendChild(t);document.body.appendChild(n);$(n).submit()},print:function(n){$(window.frames.iframe_print.document.body).html('<link href="images/print.css" media="screen" rel="stylesheet" type="text/css" />').append(n);$(window.frames.iframe_print.document.body).find("table").attr("border","1").attr("width","100%").css({fontSize:"12px",lineHeight:"24px"});window.frames.iframe_print.window.print()}};my.util={getDaysByYear:function(n){var t=new Date(n,0,1).getTime(),i=new Date(parseInt(n)+1,0,1).getTime();return(i-t)/864e5},getMax:function(n,t){var i=0;return $.each(n,function(){parseInt(this[t])>i&&(i=this[t])}),i},getDaysByMonth:function(n,t){return t%4==0&&n==2?29:[31,28,31,30,31,30,31,31,30,31,30,31][n-1]},getFestByYear:function(n){var t={};return $.each({"春节":{type:"cn",start:{month:1,day:1},end:{month:1,day:1}},"情人节":{type:"com",start:{month:2,day:14},end:{month:2,day:14}},"劳动节":{type:"com",start:{month:5,day:1},end:{month:5,day:1}},"儿童节":{type:"com",start:{month:6,day:1},end:{month:6,day:1}},"重阳节":{type:"cn",start:{month:9,day:9},end:{month:9,day:9}},"国庆节":{type:"com",start:{month:10,day:1},end:{month:10,day:1}},"中秋节":{type:"cn",start:{month:8,day:15},end:{month:8,day:15}},"清明节":{type:"com",start:{month:4,day:4},end:{month:4,day:6}},"端午节":{type:"cn",start:{month:5,day:5},end:{month:5,day:5}}},function(i){var r=0;r=this.type=="cn"?CalConvert(new Date(n,this.start.month-1,this.start.day),!1).getMonth():this.start.month;t[r]||(t[r]=[]);t[r].push(i)}),t},getWeekByDay:function(n,t,i){var r=new Date(i,t-1,n).getDay(),u;return r==0&&(r=7),u=["一","二","三","四","五","六","日"],u[r-1]},getMonths:function(n){var t=my.util.getFestByYear(n),i=this.getMonthList();return $.each(i,function(){t[this.value]&&(this.fest=t[this.value].join(","))}),i},getMonthsList:function(n){return my.util.getFestByYear(n)},getDays:function(n,t){for(var u=this.getDaysByMonth(n,t),r=[],i=1;i<=u;i++)r.push({day:i,week:this.getWeekByDay(i,n,t)});return r},getDayList:function(n,t){for(var u=this.getDaysByMonth(n,t),r={},i=1;i<=u;i++)r[i]={week:this.getWeekByDay(i,n,t)};return r},getScript:function(n,t,i){$.ajax({url:n,async:t,type:"get",success:function(n){(window.execScript||function(n){window.eval.call(window,n)})(n);i&&typeof i=="function"&&i()},dataType:"text"})},toJson:function(n){return $.toJSON(n)},getMonthTxt:function(n){return["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][n-1]},getDateList:function(n,t){for(var r=0,u=[],r=n==(new Date).getFullYear()&&t==(new Date).getMonth()+1?(new Date).getDate():this.getDaysByMonth(t,n),i=1;i<=r;i++)u.push({value:i,title:i+"日"});return u},getMonthList:function(n){var r=[{month:"一月",value:1},{month:"二月",value:2},{month:"三月",value:3},{month:"四月",value:4},{month:"五月",value:5},{month:"六月",value:6},{month:"七月",value:7},{month:"八月",value:8},{month:"九月",value:9},{month:"十月",value:10},{month:"十一月",value:11},{month:"十二月",value:12},],u,i,t;if(n==(new Date).getFullYear()){for(u=(new Date).getMonth()+1,i=[],t=1;t<=u;t++)i.push(r[t-1]);return i}return r},getYearList:function(){for(var i=(new Date).getFullYear(),t=[],n=2013;n<=i;n++)t.push({title:n+"年",value:n});return t},getYears:function(){return[{year:"2011年",days:"365天"},{year:"2012年",days:"366天"},{year:"2013年",days:"365天"}]},send:function(n,t,i,r){my.debug&&console.log("请求:"+n+"，发送数据："+$.toJSON(t));$.ajax({url:"/api/index.php",type:"POST",data:"request="+$.toJSON(t)+"&method="+n,timeout:6e4,dataType:"text",error:function(){my.view.message("获取数据超时，请稍后重试！")},success:function(n){if(my.debug&&console.log("接收数据："+n),typeof n=="string"&&n=="close")return my.view.message("非常抱歉，系统维护中，请稍候再试！");if(typeof n=="string"&&n=="power error")return my.view.message("权限不足，请联系管理员！");try{if(n=$.parseJSON(n),!n.request)throw"server error";n=n.request}catch(t){r&&typeof r=="function"?r(n):my.view.message("服务器故障，请联系管理员。");return}i&&typeof i=="function"&&i(n)}})},getCookie:function(n){for(var r=n+"=",u=r.length,f=document.cookie.length,t=0,i;t<f;){if(i=t+u,document.cookie.substring(t,i)==r)return my.util.getCookieVal(i);if(t=document.cookie.indexOf(" ",t)+1,t==0)break}return""},getCookieVal:function(n){var t=document.cookie.indexOf(";",n);return t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(n,t))},HTMLEncode:function(n){var t=document.createElement("DIV"),i;return t.innerText=n,i=t.innerHTML,t=null,i},HTMLDecode:function(n){var t=document.createElement("DIV"),i;return t.innerHTML=n,i=t.innerText,t=null,i},getJsonTableData:function(n){var i=$("#"+n),r=i.find("tr"),t=[];return $.each(r,function(){var i=$(this).find("th,td"),n=[];$.each(i,function(){var t={};t.html=$(this).html().replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ");t.bgcolor=$(this).prop("tagName").toLowerCase()=="td"?"FFFFFF":"F5F5F5";t.colspan=$(this).attr("colspan")?$(this).attr("colspan"):1;t.rowspan=$(this).attr("rowspan")?$(this).attr("rowspan"):1;t.width=$(this).outerWidth();n.push(t)});t.push(n)}),t},getStore:function(n){var t;return $.each(my.stores,function(){if(this.value==n)return t=this,!0}),t},getStores:function(){var n=[];return $.each(my.stores,function(){n.push(this.store_id)}),n}};Date.prototype.format=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));/(E+)/.test(n)&&(n=n.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+{"0":"日","1":"一","2":"二","3":"三","4":"四","5":"五","6":"六"}[this.getDay()+""]));for(t in i)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n};var isIE=!!window.ActiveXObject,isIE6=isIE&&!window.XMLHttpRequest,isIE8=isIE&&!!document.documentMode;String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};strChineseFirstPY="YDYQSXMWZSSXJBYMGCCZQPSSQBYCDSCDQLDYLYBSSJGYZZJJFKCCLZDHWDWZJLJPFYYNWJJTMYHZWZHFLZPPQHGSCYYYNJQYXXGJHHSDSJNKKTMOMLCRXYPSNQSECCQZGGLLYJLMYZZSECYKYYHQWJSSGGYXYZYJWWKDJHYCHMYXJTLXJYQBYXZLDWRDJRWYSRLDZJPCBZJJBRCFTLECZSTZFXXZHTRQHYBDLYCZSSYMMRFMYQZPWWJJYFCRWFDFZQPYDDWYXKYJAWJFFXYPSFTZYHHYZYSWCJYXSCLCXXWZZXNBGNNXBXLZSZSBSGPYSYZDHMDZBQBZCWDZZYYTZHBTSYYBZGNTNXQYWQSKBPHHLXGYBFMJEBJHHGQTJCYSXSTKZHLYCKGLYSMZXYALMELDCCXGZYRJXSDLTYZCQKCNNJWHJTZZCQLJSTSTBNXBTYXCEQXGKWJYFLZQLYHYXSPSFXLMPBYSXXXYDJCZYLLLSJXFHJXPJBTFFYABYXBHZZBJYZLWLCZGGBTSSMDTJZXPTHYQTGLJSCQFZKJZJQNLZWLSLHDZBWJNCJZYZSQQYCQYRZCJJWYBRTWPYFTWEXCSKDZCTBZHYZZYYJXZCFFZZMJYXXSDZZOTTBZLQWFCKSZSXFYRLNYJMBDTHJXSQQCCSBXYYTSYFBXDZTGBCNSLCYZZPSAZYZZSCJCSHZQYDXLBPJLLMQXTYDZXSQJTZPXLCGLQTZWJBHCTSYJSFXYEJJTLBGXSXJMYJQQPFZASYJNTYDJXKJCDJSZCBARTDCLYJQMWNQNCLLLKBYBZZSYHQQLTWLCCXTXLLZNTYLNEWYZYXCZXXGRKRMTCNDNJTSYYSSDQDGHSDBJGHRWRQLYBGLXHLGTGXBQJDZPYJSJYJCTMRNYMGRZJCZGJMZMGXMPRYXKJNYMSGMZJYMKMFXMLDTGFBHCJHKYLPFMDXLQJJSMTQGZSJLQDLDGJYCALCMZCSDJLLNXDJFFFFJCZFMZFFPFKHKGDPSXKTACJDHHZDDCRRCFQYJKQCCWJDXHWJLYLLZGCFCQDSMLZPBJJPLSBCJGGDCKKDEZSQCCKJGCGKDJTJDLZYCXKLQSCGJCLTFPCQCZGWPJDQYZJJBYJHSJDZWGFSJGZKQCCZLLPSPKJGQJHZZLJPLGJGJJTHJJYJZCZMLZLYQBGJWMLJKXZDZNJQSYZMLJLLJKYWXMKJLHSKJGBMCLYYMKXJQLBMLLKMDXXKWYXYSLMLPSJQQJQXYXFJTJDXMXXLLCXQBSYJBGWYMBGGBCYXPJYGPEPFGDJGBHBNSQJYZJKJKHXQFGQZKFHYGKHDKLLSDJQXPQYKYBNQSXQNSZSWHBSXWHXWBZZXDMNSJBSBKBBZKLYLXGWXDRWYQZMYWSJQLCJXXJXKJEQXSCYETLZHLYYYSDZPAQYZCMTLSHTZCFYZYXYLJSDCJQAGYSLCQLYYYSHMRQQKLDXZSCSSSYDYCJYSFSJBFRSSZQSBXXPXJYSDRCKGJLGDKZJZBDKTCSYQPYHSTCLDJDHMXMCGXYZHJDDTMHLTXZXYLYMOHYJCLTYFBQQXPFBDFHHTKSQHZYYWCNXXCRWHOWGYJLEGWDQCWGFJYCSNTMYTOLBYGWQWESJPWNMLRYDZSZTXYQPZGCWXHNGPYXSHMYQJXZTDPPBFYHZHTJYFDZWKGKZBLDNTSXHQEEGZZYLZMMZYJZGXZXKHKSTXNXXWYLYAPSTHXDWHZYMPXAGKYDXBHNHXKDPJNMYHYLPMGOCSLNZHKXXLPZZLBMLSFBHHGYGYYGGBHSCYAQTYWLXTZQCEZYDQDQMMHTKLLSZHLSJZWFYHQSWSCWLQAZYNYTLSXTHAZNKZZSZZLAXXZWWCTGQQTDDYZTCCHYQZFLXPSLZYGPZSZNGLNDQTBDLXGTCTAJDKYWNSYZLJHHZZCWNYYZYWMHYCHHYXHJKZWSXHZYXLYSKQYSPSLYZWMYPPKBYGLKZHTYXAXQSYSHXASMCHKDSCRSWJPWXSGZJLWWSCHSJHSQNHCSEGNDAQTBAALZZMSSTDQJCJKTSCJAXPLGGXHHGXXZCXPDMMHLDGTYBYSJMXHMRCPXXJZCKZXSHMLQXXTTHXWZFKHCCZDYTCJYXQHLXDHYPJQXYLSYYDZOZJNYXQEZYSQYAYXWYPDGXDDXSPPYZNDLTWRHXYDXZZJHTCXMCZLHPYYYYMHZLLHNXMYLLLMDCPPXHMXDKYCYRDLTXJCHHZZXZLCCLYLNZSHZJZZLNNRLWHYQSNJHXYNTTTKYJPYCHHYEGKCTTWLGQRLGGTGTYGYHPYHYLQYQGCWYQKPYYYTTTTLHYHLLTYTTSPLKYZXGZWGPYDSSZZDQXSKCQNMJJZZBXYQMJRTFFBTKHZKBXLJJKDXJTLBWFZPPTKQTZTGPDGNTPJYFALQMKGXBDCLZFHZCLLLLADPMXDJHLCCLGYHDZFGYDDGCYYFGYDXKSSEBDHYKDKDKHNAXXYBPBYYHXZQGAFFQYJXDMLJCSQZLLPCHBSXGJYNDYBYQSPZWJLZKSDDTACTBXZDYZYPJZQSJNKKTKNJDJGYYPGTLFYQKASDNTCYHBLWDZHBBYDWJRYGKZYHEYYFJMSDTYFZJJHGCXPLXHLDWXXJKYTCYKSSSMTWCTTQZLPBSZDZWZXGZAGYKTYWXLHLSPBCLLOQMMZSSLCMBJCSZZKYDCZJGQQDSMCYTZQQLWZQZXSSFPTTFQMDDZDSHDTDWFHTDYZJYQJQKYPBDJYYXTLJHDRQXXXHAYDHRJLKLYTWHLLRLLRCXYLBWSRSZZSYMKZZHHKYHXKSMDSYDYCJPBZBSQLFCXXXNXKXWYWSDZYQOGGQMMYHCDZTTFJYYBGSTTTYBYKJDHKYXBELHTYPJQNFXFDYKZHQKZBYJTZBXHFDXKDASWTAWAJLDYJSFHBLDNNTNQJTJNCHXFJSRFWHZFMDRYJYJWZPDJKZYJYMPCYZNYNXFBYTFYFWYGDBNZZZDNYTXZEMMQBSQEHXFZMBMFLZZSRXYMJGSXWZJSPRYDJSJGXHJJGLJJYNZZJXHGXKYMLPYYYCXYTWQZSWHWLYRJLPXSLSXMFSWWKLCTNXNYNPSJSZHDZEPTXMYYWXYYSYWLXJQZQXZDCLEEELMCPJPCLWBXSQHFWWTFFJTNQJHJQDXHWLBYZNFJLALKYYJLDXHHYCSTYYWNRJYXYWTRMDRQHWQCMFJDYZMHMYYXJWMYZQZXTLMRSPWWCHAQBXYGZYPXYYRRCLMPYMGKSJSZYSRMYJSNXTPLNBAPPYPYLXYYZKYNLDZYJZCZNNLMZHHARQMPGWQTZMXXMLLHGDZXYHXKYXYCJMFFYYHJFSBSSQLXXNDYCANNMTCJCYPRRNYTYQNYYMBMSXNDLYLYSLJRLXYSXQMLLYZLZJJJKYZZCSFBZXXMSTBJGNXYZHLXNMCWSCYZYFZLXBRNNNYLBNRTGZQYSATSWRYHYJZMZDHZGZDWYBSSCSKXSYHYTXXGCQGXZZSHYXJSCRHMKKBXCZJYJYMKQHZJFNBHMQHYSNJNZYBKNQMCLGQHWLZNZSWXKHLJHYYBQLBFCDSXDLDSPFZPSKJYZWZXZDDXJSMMEGJSCSSMGCLXXKYYYLNYPWWWGYDKZJGGGZGGSYCKNJWNJPCXBJJTQTJWDSSPJXZXNZXUMELPXFSXTLLXCLJXJJLJZXCTPSWXLYDHLYQRWHSYCSQYYBYAYWJJJQFWQCQQCJQGXALDBZZYJGKGXPLTZYFXJLTPADKYQHPMATLCPDCKBMTXYBHKLENXDLEEGQDYMSAWHZMLJTWYGXLYQZLJEEYYBQQFFNLYXRDSCTGJGXYYNKLLYQKCCTLHJLQMKKZGCYYGLLLJDZGYDHZWXPYSJBZKDZGYZZHYWYFQYTYZSZYEZZLYMHJJHTSMQWYZLKYYWZCSRKQYTLTDXWCTYJKLWSQZWBDCQYNCJSRSZJLKCDCDTLZZZACQQZZDDXYPLXZBQJYLZLLLQDDZQJYJYJZYXNYYYNYJXKXDAZWYRDLJYYYRJLXLLDYXJCYWYWNQCCLDDNYYYNYCKCZHXXCCLGZQJGKWPPCQQJYSBZZXYJSQPXJPZBSBDSFNSFPZXHDWZTDWPPTFLZZBZDMYYPQJRSDZSQZSQXBDGCPZSWDWCSQZGMDHZXMWWFYBPDGPHTMJTHZSMMBGZMBZJCFZWFZBBZMQCFMBDMCJXLGPNJBBXGYHYYJGPTZGZMQBQTCGYXJXLWZKYDPDYMGCFTPFXYZTZXDZXTGKMTYBBCLBJASKYTSSQYYMSZXFJEWLXLLSZBQJJJAKLYLXLYCCTSXMCWFKKKBSXLLLLJYXTYLTJYYTDPJHNHNNKBYQNFQYYZBYYESSESSGDYHFHWTCJBSDZZTFDMXHCNJZYMQWSRYJDZJQPDQBBSTJGGFBKJBXTGQHNGWJXJGDLLTHZHHYYYYYYSXWTYYYCCBDBPYPZYCCZYJPZYWCBDLFWZCWJDXXHYHLHWZZXJTCZLCDPXUJCZZZLYXJJTXPHFXWPYWXZPTDZZBDZCYHJHMLXBQXSBYLRDTGJRRCTTTHYTCZWMXFYTWWZCWJWXJYWCSKYBZSCCTZQNHXNWXXKHKFHTSWOCCJYBCMPZZYKBNNZPBZHHZDLSYDDYTYFJPXYNGFXBYQXCBHXCPSXTYZDMKYSNXSXLHKMZXLYHDHKWHXXSSKQYHHCJYXGLHZXCSNHEKDTGZXQYPKDHEXTYKCNYMYYYPKQYYYKXZLTHJQTBYQHXBMYHSQCKWWYLLHCYYLNNEQXQWMCFBDCCMLJGGXDQKTLXKGNQCDGZJWYJJLYHHQTTTNWCHMXCXWHWSZJYDJCCDBQCDGDNYXZTHCQRXCBHZTQCBXWGQWYYBXHMBYMYQTYEXMQKYAQYRGYZSLFYKKQHYSSQYSHJGJCNXKZYCXSBXYXHYYLSTYCXQTHYSMGSCPMMGCCCCCMTZTASMGQZJHKLOSQYLSWTMXSYQKDZLJQQYPLSYCZTCQQPBBQJZCLPKHQZYYXXDTDDTSJCXFFLLCHQXMJLWCJCXTSPYCXNDTJSHJWXDQQJSKXYAMYLSJHMLALYKXCYYDMNMDQMXMCZNNCYBZKKYFLMCHCMLHXRCJJHSYLNMTJZGZGYWJXSRXCWJGJQHQZDQJDCJJZKJKGDZQGJJYJYLXZXXCDQHHHEYTMHLFSBDJSYYSHFYSTCZQLPBDRFRZTZYKYWHSZYQKWDQZRKMSYNBCRXQBJYFAZPZZEDZCJYWBCJWHYJBQSZYWRYSZPTDKZPFPBNZTKLQYHBBZPNPPTYZZYBQNYDCPJMMCYCQMCYFZZDCMNLFPBPLNGQJTBTTNJZPZBBZNJKLJQYLNBZQHKSJZNGGQSZZKYXSHPZSNBCGZKDDZQANZHJKDRTLZLSWJLJZLYWTJNDJZJHXYAYNCBGTZCSSQMNJPJYTYSWXZFKWJQTKHTZPLBHSNJZSYZBWZZZZLSYLSBJHDWWQPSLMMFBJDWAQYZTCJTBNNWZXQXCDSLQGDSDPDZHJTQQPSWLYYJZLGYXYZLCTCBJTKTYCZJTQKBSJLGMGZDMCSGPYNJZYQYYKNXRPWSZXMTNCSZZYXYBYHYZAXYWQCJTLLCKJJTJHGDXDXYQYZZBYWDLWQCGLZGJGQRQZCZSSBCRPCSKYDZNXJSQGXSSJMYDNSTZTPBDLTKZWXQWQTZEXNQCZGWEZKSSBYBRTSSSLCCGBPSZQSZLCCGLLLZXHZQTHCZMQGYZQZNMCOCSZJMMZSQPJYGQLJYJPPLDXRGZYXCCSXHSHGTZNLZWZKJCXTCFCJXLBMQBCZZWPQDNHXLJCTHYZLGYLNLSZZPCXDSCQQHJQKSXZPBAJYEMSMJTZDXLCJYRYYNWJBNGZZTMJXLTBSLYRZPYLSSCNXPHLLHYLLQQZQLXYMRSYCXZLMMCZLTZSDWTJJLLNZGGQXPFSKYGYGHBFZPDKMWGHCXMSGDXJMCJZDYCABXJDLNBCDQYGSKYDQTXDJJYXMSZQAZDZFSLQXYJSJZYLBTXXWXQQZBJZUFBBLYLWDSLJHXJYZJWTDJCZFQZQZZDZSXZZQLZCDZFJHYSPYMPQZMLPPLFFXJJNZZYLSJEYQZFPFZKSYWJJJHRDJZZXTXXGLGHYDXCSKYSWMMZCWYBAZBJKSHFHJCXMHFQHYXXYZFTSJYZFXYXPZLCHMZMBXHZZSXYFYMNCWDABAZLXKTCSHHXKXJJZJSTHYGXSXYYHHHJWXKZXSSBZZWHHHCWTZZZPJXSNXQQJGZYZYWLLCWXZFXXYXYHXMKYYSWSQMNLNAYCYSPMJKHWCQHYLAJJMZXHMMCNZHBHXCLXTJPLTXYJHDYYLTTXFSZHYXXSJBJYAYRSMXYPLCKDUYHLXRLNLLSTYZYYQYGYHHSCCSMZCTZQXKYQFPYYRPFFLKQUNTSZLLZMWWTCQQYZWTLLMLMPWMBZSSTZRBPDDTLQJJBXZCSRZQQYGWCSXFWZLXCCRSZDZMCYGGDZQSGTJSWLJMYMMZYHFBJDGYXCCPSHXNZCSBSJYJGJMPPWAFFYFNXHYZXZYLREMZGZCYZSSZDLLJCSQFNXZKPTXZGXJJGFMYYYSNBTYLBNLHPFZDCYFBMGQRRSSSZXYSGTZRNYDZZCDGPJAFJFZKNZBLCZSZPSGCYCJSZLMLRSZBZZLDLSLLYSXSQZQLYXZLSKKBRXBRBZCYCXZZZEEYFGKLZLYYHGZSGZLFJHGTGWKRAAJYZKZQTSSHJJXDCYZUYJLZYRZDQQHGJZXSSZBYKJPBFRTJXLLFQWJHYLQTYMBLPZDXTZYGBDHZZRBGXHWNJTJXLKSCFSMWLSDQYSJTXKZSCFWJLBXFTZLLJZLLQBLSQMQQCGCZFPBPHZCZJLPYYGGDTGWDCFCZQYYYQYSSCLXZSKLZZZGFFCQNWGLHQYZJJCZLQZZYJPJZZBPDCCMHJGXDQDGDLZQMFGPSYTSDYFWWDJZJYSXYYCZCYHZWPBYKXRYLYBHKJKSFXTZJMMCKHLLTNYYMSYXYZPYJQYCSYCWMTJJKQYRHLLQXPSGTLYYCLJSCPXJYZFNMLRGJJTYZBXYZMSJYJHHFZQMSYXRSZCWTLRTQZSSTKXGQKGSPTGCZNJSJCQCXHMXGGZTQYDJKZDLBZSXJLHYQGGGTHQSZPYHJHHGYYGKGGCWJZZYLCZLXQSFTGZSLLLMLJSKCTBLLZZSZMMNYTPZSXQHJCJYQXYZXZQZCPSHKZZYSXCDFGMWQRLLQXRFZTLYSTCTMJCXJJXHJNXTNRZTZFQYHQGLLGCXSZSJDJLJCYDSJTLNYXHSZXCGJZYQPYLFHDJSBPCCZHJJJQZJQDYBSSLLCMYTTMQTBHJQNNYGKYRQYQMZGCJKPDCGMYZHQLLSLLCLMHOLZGDYYFZSLJCQZLYLZQJESHNYLLJXGJXLYSYYYXNBZLJSSZCQQCJYLLZLTJYLLZLLBNYLGQCHXYYXOXCXQKYJXXXYKLXSXXYQXCYKQXQCSGYXXYQXYGYTQOHXHXPYXXXULCYEYCHZZCBWQBBWJQZSCSZSSLZYLKDESJZWMYMCYTSDSXXSCJPQQSQYLYYZYCMDJDZYWCBTJSYDJKCYDDJLBDJJSODZYSYXQQYXDHHGQQYQHDYXWGMMMAJDYBBBPPBCMUUPLJZSMTXERXJMHQNUTPJDCBSSMSSSTKJTSSMMTRCPLZSZMLQDSDMJMQPNQDXCFYNBFSDQXYXHYAYKQYDDLQYYYSSZBYDSLNTFQTZQPZMCHDHCZCWFDXTMYQSPHQYYXSRGJCWTJTZZQMGWJJTJHTQJBBHWZPXXHYQFXXQYWYYHYSCDYDHHQMNMTMWCPBSZPPZZGLMZFOLLCFWHMMSJZTTDHZZYFFYTZZGZYSKYJXQYJZQBHMBZZLYGHGFMSHPZFZSNCLPBQSNJXZSLXXFPMTYJYGBXLLDLXPZJYZJYHHZCYWHJYLSJEXFSZZYWXKZJLUYDTMLYMQJPWXYHXSKTQJEZRPXXZHHMHWQPWQLYJJQJJZSZCPHJLCHHNXJLQWZJHBMZYXBDHHYPZLHLHLGFWLCHYYTLHJXCJMSCPXSTKPNHQXSRTYXXTESYJCTLSSLSTDLLLWWYHDHRJZSFGXTSYCZYNYHTDHWJSLHTZDQDJZXXQHGYLTZPHCSQFCLNJTCLZPFSTPDYNYLGMJLLYCQHYSSHCHYLHQYQTMZYPBYWRFQYKQSYSLZDQJMPXYYSSRHZJNYWTQDFZBWWTWWRXCWHGYHXMKMYYYQMSMZHNGCEPMLQQMTCWCTMMPXJPJJHFXYYZSXZHTYBMSTSYJTTQQQYYLHYNPYQZLCYZHZWSMYLKFJXLWGXYPJYTYSYXYMZCKTTWLKSMZSYLMPWLZWXWQZSSAQSYXYRHSSNTSRAPXCPWCMGDXHXZDZYFJHGZTTSBJHGYZSZYSMYCLLLXBTYXHBBZJKSSDMALXHYCFYGMQYPJYCQXJLLLJGSLZGQLYCJCCZOTYXMTMTTLLWTGPXYMZMKLPSZZZXHKQYSXCTYJZYHXSHYXZKXLZWPSQPYHJWPJPWXQQYLXSDHMRSLZZYZWTTCYXYSZZSHBSCCSTPLWSSCJCHNLCGCHSSPHYLHFHHXJSXYLLNYLSZDHZXYLSXLWZYKCLDYAXZCMDDYSPJTQJZLNWQPSSSWCTSTSZLBLNXSMNYYMJQBQHRZWTYYDCHQLXKPZWBGQYBKFCMZWPZLLYYLSZYDWHXPSBCMLJBSCGBHXLQHYRLJXYSWXWXZSLDFHLSLYNJLZYFLYJYCDRJLFSYZFSLLCQYQFGJYHYXZLYLMSTDJCYHBZLLNWLXXYGYYHSMGDHXXHHLZZJZXCZZZCYQZFNGWPYLCPKPYYPMCLQKDGXZGGWQBDXZZKZFBXXLZXJTPJPTTBYTSZZDWSLCHZHSLTYXHQLHYXXXYYZYSWTXZKHLXZXZPYHGCHKCFSYHUTJRLXFJXPTZTWHPLYXFCRHXSHXKYXXYHZQDXQWULHYHMJTBFLKHTXCWHJFWJCFPQRYQXCYYYQYGRPYWSGSUNGWCHKZDXYFLXXHJJBYZWTSXXNCYJJYMSWZJQRMHXZWFQSYLZJZGBHYNSLBGTTCSYBYXXWXYHXYYXNSQYXMQYWRGYQLXBBZLJSYLPSYTJZYHYZAWLRORJMKSCZJXXXYXCHDYXRYXXJDTSQFXLYLTSFFYXLMTYJMJUYYYXLTZCSXQZQHZXLYYXZHDNBRXXXJCTYHLBRLMBRLLAXKYLLLJLYXXLYCRYLCJTGJCMTLZLLCYZZPZPCYAWHJJFYBDYYZSMPCKZDQYQPBPCJPDCYZMDPBCYYDYCNNPLMTMLRMFMMGWYZBSJGYGSMZQQQZTXMKQWGXLLPJGZBQCDJJJFPKJKCXBLJMSWMDTQJXLDLPPBXCWRCQFBFQJCZAHZGMYKPHYYHZYKNDKZMBPJYXPXYHLFPNYYGXJDBKXNXHJMZJXSTRSTLDXSKZYSYBZXJLXYSLBZYSLHXJPFXPQNBYLLJQKYGZMCYZZYMCCSLCLHZFWFWYXZMWSXTYNXJHPYYMCYSPMHYSMYDYSHQYZCHMJJMZCAAGCFJBBHPLYZYLXXSDJGXDHKXXTXXNBHRMLYJSLTXMRHNLXQJXYZLLYSWQGDLBJHDCGJYQYCMHWFMJYBMBYJYJWYMDPWHXQLDYGPDFXXBCGJSPCKRSSYZJMSLBZZJFLJJJLGXZGYXYXLSZQYXBEXYXHGCXBPLDYHWETTWWCJMBTXCHXYQXLLXFLYXLLJLSSFWDPZSMYJCLMWYTCZPCHQEKCQBWLCQYDPLQPPQZQFJQDJHYMMCXTXDRMJWRHXCJZYLQXDYYNHYYHRSLSRSYWWZJYMTLTLLGTQCJZYABTCKZCJYCCQLJZQXALMZYHYWLWDXZXQDLLQSHGPJFJLJHJABCQZDJGTKHSSTCYJLPSWZLXZXRWGLDLZRLZXTGSLLLLZLYXXWGDZYGBDPHZPBRLWSXQBPFDWOFMWHLYPCBJCCLDMBZPBZZLCYQXLDOMZBLZWPDWYYGDSTTHCSQSCCRSSSYSLFYBFNTYJSZDFNDPDHDZZMBBLSLCMYFFGTJJQWFTMTPJWFNLBZCMMJTGBDZLQLPYFHYYMJYLSDCHDZJWJCCTLJCLDTLJJCPDDSQDSSZYBNDBJLGGJZXSXNLYCYBJXQYCBYLZCFZPPGKCXZDZFZTJJFJSJXZBNZYJQTTYJYHTYCZHYMDJXTTMPXSPLZCDWSLSHXYPZGTFMLCJTYCBPMGDKWYCYZCDSZZYHFLYCTYGWHKJYYLSJCXGYWJCBLLCSNDDBTZBSCLYZCZZSSQDLLMQYYHFSLQLLXFTYHABXGWNYWYYPLLSDLDLLBJCYXJZMLHLJDXYYQYTDLLLBUGBFDFBBQJZZMDPJHGCLGMJJPGAEHHBWCQXAXHHHZCHXYPHJAXHLPHJPGPZJQCQZGJJZZUZDMQYYBZZPHYHYBWHAZYJHYKFGDPFQSDLZMLJXKXGALXZDAGLMDGXMWZQYXXDXXPFDMMSSYMPFMDMMKXKSYZYSHDZKXSYSMMZZZMSYDNZZCZXFPLSTMZDNMXCKJMZTYYMZMZZMSXHHDCZJEMXXKLJSTLWLSQLYJZLLZJSSDPPMHNLZJCZYHMXXHGZCJMDHXTKGRMXFWMCGMWKDTKSXQMMMFZZYDKMSCLCMPCGMHSPXQPZDSSLCXKYXTWLWJYAHZJGZQMCSNXYYMMPMLKJXMHLMLQMXCTKZMJQYSZJSYSZHSYJZJCDAJZYBSDQJZGWZQQXFKDMSDJLFWEHKZQKJPEYPZYSZCDWYJFFMZZYLTTDZZEFMZLBNPPLPLPEPSZALLTYLKCKQZKGENQLWAGYXYDPXLHSXQQWQCQXQCLHYXXMLYCCWLYMQYSKGCHLCJNSZKPYZKCQZQLJPDMDZHLASXLBYDWQLWDNBQCRYDDZTJYBKBWSZDXDTNPJDTCTQDFXQQMGNXECLTTBKPWSLCTYQLPWYZZKLPYGZCQQPLLKCCYLPQMZCZQCLJSLQZDJXLDDHPZQDLJJXZQDXYZQKZLJCYQDYJPPYPQYKJYRMPCBYMCXKLLZLLFQPYLLLMBSGLCYSSLRSYSQTMXYXZQZFDZUYSYZTFFMZZSMZQHZSSCCMLYXWTPZGXZJGZGSJSGKDDHTQGGZLLBJDZLCBCHYXYZHZFYWXYZYMSDBZZYJGTSMTFXQYXQSTDGSLNXDLRYZZLRYYLXQHTXSRTZNGZXBNQQZFMYKMZJBZYMKBPNLYZPBLMCNQYZZZSJZHJCTZKHYZZJRDYZHNPXGLFZTLKGJTCTSSYLLGZRZBBQZZKLPKLCZYSSUYXBJFPNJZZXCDWXZYJXZZDJJKGGRSRJKMSMZJLSJYWQSKYHQJSXPJZZZLSNSHRNYPZTWCHKLPSRZLZXYJQXQKYSJYCZTLQZYBBYBWZPQDWWYZCYTJCJXCKCWDKKZXSGKDZXWWYYJQYYTCYTDLLXWKCZKKLCCLZCQQDZLQLCSFQCHQHSFSMQZZLNBJJZBSJHTSZDYSJQJPDLZCDCWJKJZZLPYCGMZWDJJBSJQZSYZYHHXJPBJYDSSXDZNCGLQMBTSFSBPDZDLZNFGFJGFSMPXJQLMBLGQCYYXBQKDJJQYRFKZTJDHCZKLBSDZCFJTPLLJGXHYXZCSSZZXSTJYGKGCKGYOQXJPLZPBPGTGYJZGHZQZZLBJLSQFZGKQQJZGYCZBZQTLDXRJXBSXXPZXHYZYCLWDXJJHXMFDZPFZHQHQMQGKSLYHTYCGFRZGNQXCLPDLBZCSCZQLLJBLHBZCYPZZPPDYMZZSGYHCKCPZJGSLJLNSCDSLDLXBMSTLDDFJMKDJDHZLZXLSZQPQPGJLLYBDSZGQLBZLSLKYYHZTTNTJYQTZZPSZQZTLLJTYYLLQLLQYZQLBDZLSLYYZYMDFSZSNHLXZNCZQZPBWSKRFBSYZMTHBLGJPMCZZLSTLXSHTCSYZLZBLFEQHLXFLCJLYLJQCBZLZJHHSSTBRMHXZHJZCLXFNBGXGTQJCZTMSFZKJMSSNXLJKBHSJXNTNLZDNTLMSJXGZJYJCZXYJYJWRWWQNZTNFJSZPZSHZJFYRDJSFSZJZBJFZQZZHZLXFYSBZQLZSGYFTZDCSZXZJBQMSZKJRHYJZCKMJKHCHGTXKXQGLXPXFXTRTYLXJXHDTSJXHJZJXZWZLCQSBTXWXGXTXXHXFTSDKFJHZYJFJXRZSDLLLTQSQQZQWZXSYQTWGWBZCGZLLYZBCLMQQTZHZXZXLJFRMYZFLXYSQXXJKXRMQDZDMMYYBSQBHGZMWFWXGMXLZPYYTGZYCCDXYZXYWGSYJYZNBHPZJSQSYXSXRTFYZGRHZTXSZZTHCBFCLSYXZLZQMZLMPLMXZJXSFLBYZMYQHXJSXRXSQZZZSSLYFRCZJRCRXHHZXQYDYHXSJJHZCXZBTYNSYSXJBQLPXZQPYMLXZKYXLXCJLCYSXXZZLXDLLLJJYHZXGYJWKJRWYHCPSGNRZLFZWFZZNSXGXFLZSXZZZBFCSYJDBRJKRDHHGXJLJJTGXJXXSTJTJXLYXQFCSGSWMSBCTLQZZWLZZKXJMLTMJYHSDDBXGZHDLBMYJFRZFSGCLYJBPMLYSMSXLSZJQQHJZFXGFQFQBPXZGYYQXGZTCQWYLTLGWSGWHRLFSFGZJMGMGBGTJFSYZZGZYZAFLSSPMLPFLCWBJZCLJJMZLPJJLYMQDMYYYFBGYGYZMLYZDXQYXRQQQHSYYYQXYLJTYXFSFSLLGNQCYHYCWFHCCCFXPYLYPLLZYXXXXXKQHHXSHJZCFZSCZJXCPZWHHHHHAPYLQALPQAFYHXDYLUKMZQGGGDDESRNNZLTZGCHYPPYSQJJHCLLJTOLNJPZLJLHYMHEYDYDSQYCDDHGZUNDZCLZYZLLZNTNYZGSLHSLPJJBDGWXPCDUTJCKLKCLWKLLCASSTKZZDNQNTTLYYZSSYSSZZRYLJQKCQDHHCRXRZYDGRGCWCGZQFFFPPJFZYNAKRGYWYQPQXXFKJTSZZXSWZDDFBBXTBGTZKZNPZZPZXZPJSZBMQHKCYXYLDKLJNYPKYGHGDZJXXEAHPNZKZTZCMXCXMMJXNKSZQNMNLWBWWXJKYHCPSTMCSQTZJYXTPCTPDTNNPGLLLZSJLSPBLPLQHDTNJNLYYRSZFFJFQWDPHZDWMRZCCLODAXNSSNYZRESTYJWJYJDBCFXNMWTTBYLWSTSZGYBLJPXGLBOCLHPCBJLTMXZLJYLZXCLTPNCLCKXTPZJSWCYXSFYSZDKNTLBYJCYJLLSTGQCBXRYZXBXKLYLHZLQZLNZCXWJZLJZJNCJHXMNZZGJZZXTZJXYCYYCXXJYYXJJXSSSJSTSSTTPPGQTCSXWZDCSYFPTFBFHFBBLZJCLZZDBXGCXLQPXKFZFLSYLTUWBMQJHSZBMDDBCYSCCLDXYCDDQLYJJWMQLLCSGLJJSYFPYYCCYLTJANTJJPWYCMMGQYYSXDXQMZHSZXPFTWWZQSWQRFKJLZJQQYFBRXJHHFWJJZYQAZMYFRHCYYBYQWLPEXCCZSTYRLTTDMQLYKMBBGMYYJPRKZNPBSXYXBHYZDJDNGHPMFSGMWFZMFQMMBCMZZCJJLCNUXYQLMLRYGQZCYXZLWJGCJCGGMCJNFYZZJHYCPRRCMTZQZXHFQGTJXCCJEAQCRJYHPLQLSZDJRBCQHQDYRHYLYXJSYMHZYDWLDFRYHBPYDTSSCNWBXGLPZMLZZTQSSCPJMXXYCSJYTYCGHYCJWYRXXLFEMWJNMKLLSWTXHYYYNCMMCWJDQDJZGLLJWJRKHPZGGFLCCSCZMCBLTBHBQJXQDSPDJZZGKGLFQYWBZYZJLTSTDHQHCTCBCHFLQMPWDSHYYTQWCNZZJTLBYMBPDYYYXSQKXWYYFLXXNCWCXYPMAELYKKJMZZZBRXYYQJFLJPFHHHYTZZXSGQQMHSPGDZQWBWPJHZJDYSCQWZKTXXSQLZYYMYSDZGRXCKKUJLWPYSYSCSYZLRMLQSYLJXBCXTLWDQZPCYCYKPPPNSXFYZJJRCEMHSZMSXLXGLRWGCSTLRSXBZGBZGZTCPLUJLSLYLYMTXMTZPALZXPXJTJWTCYYZLBLXBZLQMYLXPGHDSLSSDMXMBDZZSXWHAMLCZCPJMCNHJYSNSYGCHSKQMZZQDLLKABLWJXSFMOCDXJRRLYQZKJMYBYQLYHETFJZFRFKSRYXFJTWDSXXSYSQJYSLYXWJHSNLXYYXHBHAWHHJZXWMYLJCSSLKYDZTXBZSYFDXGXZJKHSXXYBSSXDPYNZWRPTQZCZENYGCXQFJYKJBZMLJCMQQXUOXSLYXXLYLLJDZBTYMHPFSTTQQWLHOKYBLZZALZXQLHZWRRQHLSTMYPYXJJXMQSJFNBXYXYJXXYQYLTHYLQYFMLKLJTMLLHSZWKZHLJMLHLJKLJSTLQXYLMBHHLNLZXQJHXCFXXLHYHJJGBYZZKBXSCQDJQDSUJZYYHZHHMGSXCSYMXFEBCQWWRBPYYJQTYZCYQYQQZYHMWFFHGZFRJFCDPXNTQYZPDYKHJLFRZXPPXZDBBGZQSTLGDGYLCQMLCHHMFYWLZYXKJLYPQHSYWMQQGQZMLZJNSQXJQSYJYCBEHSXFSZPXZWFLLBCYYJDYTDTHWZSFJMQQYJLMQXXLLDTTKHHYBFPWTYYSQQWNQWLGWDEBZWCMYGCULKJXTMXMYJSXHYBRWFYMWFRXYQMXYSZTZZTFYKMLDHQDXWYYNLCRYJBLPSXCXYWLSPRRJWXHQYPHTYDNXHHMMYWYTZCSQMTSSCCDALWZTCPQPYJLLQZYJSWXMZZMMYLMXCLMXCZMXMZSQTZPPQQBLPGXQZHFLJJHYTJSRXWZXSCCDLXTYJDCQJXSLQYCLZXLZZXMXQRJMHRHZJBHMFLJLMLCLQNLDXZLLLPYPSYJYSXCQQDCMQJZZXHNPNXZMEKMXHYKYQLXSXTXJYYHWDCWDZHQYYBGYBCYSCFGPSJNZDYZZJZXRZRQJJYMCANYRJTLDPPYZBSTJKXXZYPFDWFGZZRPYMTNGXZQBYXNBUFNQKRJQZMJEGRZGYCLKXZDSKKNSXKCLJSPJYYZLQQJYBZSSQLLLKJXTBKTYLCCDDBLSPPFYLGYDTZJYQGGKQTTFZXBDKTYYHYBBFYTYYBCLPDYTGDHRYRNJSPTCSNYJQHKLLLZSLYDXXWBCJQSPXBPJZJCJDZFFXXBRMLAZHCSNDLBJDSZBLPRZTSWSBXBCLLXXLZDJZSJPYLYXXYFTFFFBHJJXGBYXJPMMMPSSJZJMTLYZJXSWXTYLEDQPJMYGQZJGDJLQJWJQLLSJGJGYGMSCLJJXDTYGJQJQJCJZCJGDZZSXQGSJGGCXHQXSNQLZZBXHSGZXCXYLJXYXYYDFQQJHJFXDHCTXJYRXYSQTJXYEFYYSSYYJXNCYZXFXMSYSZXYYSCHSHXZZZGZZZGFJDLTYLNPZGYJYZYYQZPBXQBDZTZCZYXXYHHSQXSHDHGQHJHGYWSZTMZMLHYXGEBTYLZKQWYTJZRCLEKYSTDBCYKQQSAYXCJXWWGSBHJYZYDHCSJKQCXSWXFLTYNYZPZCCZJQTZWJQDZZZQZLJJXLSBHPYXXPSXSHHEZTXFPTLQYZZXHYTXNCFZYYHXGNXMYWXTZSJPTHHGYMXMXQZXTSBCZYJYXXTYYZYPCQLMMSZMJZZLLZXGXZAAJZYXJMZXWDXZSXZDZXLEYJJZQBHZWZZZQTZPSXZTDSXJJJZNYAZPHXYYSRNQDTHZHYYKYJHDZXZLSWCLYBZYECWCYCRYLCXNHZYDZYDYJDFRJJHTRSQTXYXJRJHOJYNXELXSFSFJZGHPZSXZSZDZCQZBYYKLSGSJHCZSHDGQGXYZGXCHXZJWYQWGYHKSSEQZZNDZFKWYSSTCLZSTSYMCDHJXXYWEYXCZAYDMPXMDSXYBSQMJMZJMTZQLPJYQZCGQHXJHHLXXHLHDLDJQCLDWBSXFZZYYSCHTYTYYBHECXHYKGJPXHHYZJFXHWHBDZFYZBCAPNPGNYDMSXHMMMMAMYNBYJTMPXYYMCTHJBZYFCGTYHWPHFTWZZEZSBZEGPFMTSKFTYCMHFLLHGPZJXZJGZJYXZSBBQSCZZLZCCSTPGXMJSFTCCZJZDJXCYBZLFCJSYZFGSZLYBCWZZBYZDZYPSWYJZXZBDSYUXLZZBZFYGCZXBZHZFTPBGZGEJBSTGKDMFHYZZJHZLLZZGJQZLSFDJSSCBZGPDLFZFZSZYZYZSYGCXSNXXCHCZXTZZLJFZGQSQYXZJQDCCZTQCDXZJYQJQCHXZTDLGSCXZSYQJQTZWLQDQZTQCHQQJZYEZZZPBWKDJFCJPZTYPQYQTTYNLMBDKTJZPQZQZZFPZSBNJLGYJDXJDZZKZGQKXDLPZJTCJDQBXDJQJSTCKNXBXZMSLYJCQMTJQWWCJQNJNLLLHJCWQTBZQYDZCZPZZDZYDDCYZZZCCJTTJFZDPRRTZTJDCQTQZDTJNPLZBCLLCTZSXKJZQZPZLBZRBTJDCXFCZDBCCJJLTQQPLDCGZDBBZJCQDCJWYNLLZYZCCDWLLXWZLXRXNTQQCZXKQLSGDFQTDDGLRLAJJTKUYMKQLLTZYTDYYCZGJWYXDXFRSKSTQTENQMRKQZHHQKDLDAZFKYPBGGPZREBZZYKZZSPEGJXGYKQZZZSLYSYYYZWFQZYLZZLZHWCHKYPQGNPGBLPLRRJYXCCSYYHSFZFYBZYYTGZXYLXCZWXXZJZBLFFLGSKHYJZEYJHLPLLLLCZGXDRZELRHGKLZZYHZLYQSZZJZQLJZFLNBHGWLCZCFJYSPYXZLZLXGCCPZBLLCYBBBBUBBCBPCRNNZCZYRBFSRLDCGQYYQXYGMQZWTZYTYJXYFWTEHZZJYWLCCNTZYJJZDEDPZDZTSYQJHDYMBJNYJZLXTSSTPHNDJXXBYXQTZQDDTJTDYYTGWSCSZQFLSHLGLBCZPHDLYZJYCKWTYTYLBNYTSDSYCCTYSZYYEBHEXHQDTWNYGYCLXTSZYSTQMYGZAZCCSZZDSLZCLZRQXYYELJSBYMXSXZTEMBBLLYYLLYTDQYSHYMRQWKFKBFXNXSBYCHXBWJYHTQBPBSBWDZYLKGZSKYHXQZJXHXJXGNLJKZLYYCDXLFYFGHLJGJYBXQLYBXQPQGZTZPLNCYPXDJYQYDYMRBESJYYHKXXSTMXRCZZYWXYQYBMCLLYZHQYZWQXDBXBZWZMSLPDMYSKFMZKLZCYQYCZLQXFZZYDQZPZYGYJYZMZXDZFYFYTTQTZHGSPCZMLCCYTZXJCYTJMKSLPZHYSNZLLYTPZCTZZCKTXDHXXTQCYFKSMQCCYYAZHTJPCYLZLYJBJXTPNYLJYYNRXSYLMMNXJSMYBCSYSYLZYLXJJQYLDZLPQBFZZBLFNDXQKCZFYWHGQMRDSXYCYTXNQQJZYYPFZXDYZFPRXEJDGYQBXRCNFYYQPGHYJDYZXGRHTKYLNWDZNTSMPKLBTHBPYSZBZTJZSZZJTYYXZPHSSZZBZCZPTQFZMYFLYPYBBJQXZMXXDJMTSYSKKBJZXHJCKLPSMKYJZCXTMLJYXRZZQSLXXQPYZXMKYXXXJCLJPRMYYGADYSKQLSNDHYZKQXZYZTCGHZTLMLWZYBWSYCTBHJHJFCWZTXWYTKZLXQSHLYJZJXTMPLPYCGLTBZZTLZJCYJGDTCLKLPLLQPJMZPAPXYZLKKTKDZCZZBNZDYDYQZJYJGMCTXLTGXSZLMLHBGLKFWNWZHDXUHLFMKYSLGXDTWWFRJEJZTZHYDXYKSHWFZCQSHKTMQQHTZHYMJDJSKHXZJZBZZXYMPAGQMSTPXLSKLZYNWRTSQLSZBPSPSGZWYHTLKSSSWHZZLYYTNXJGMJSZSUFWNLSOZTXGXLSAMMLBWLDSZYLAKQCQCTMYCFJBSLXCLZZCLXXKSBZQCLHJPSQPLSXXCKSLNHPSFQQYTXYJZLQLDXZQJZDYYDJNZPTUZDSKJFSLJHYLZSQZLBTXYDGTQFDBYAZXDZHZJNHHQBYKNXJJQCZMLLJZKSPLDYCLBBLXKLELXJLBQYCXJXGCNLCQPLZLZYJTZLJGYZDZPLTQCSXFDMNYCXGBTJDCZNBGBQYQJWGKFHTNPYQZQGBKPBBYZMTJDYTBLSQMPSXTBNPDXKLEMYYCJYNZCTLDYKZZXDDXHQSHDGMZSJYCCTAYRZLPYLTLKXSLZCGGEXCLFXLKJRTLQJAQZNCMBYDKKCXGLCZJZXJHPTDJJMZQYKQSECQZDSHHADMLZFMMZBGNTJNNLGBYJBRBTMLBYJDZXLCJLPLDLPCQDHLXZLYCBLCXZZJADJLNZMMSSSMYBHBSQKBHRSXXJMXSDZNZPXLGBRHWGGFCXGMSKLLTSJYYCQLTSKYWYYHYWXBXQYWPYWYKQLSQPTNTKHQCWDQKTWPXXHCPTHTWUMSSYHBWCRWXHJMKMZNGWTMLKFGHKJYLSYYCXWHYECLQHKQHTTQKHFZLDXQWYZYYDESBPKYRZPJFYYZJCEQDZZDLATZBBFJLLCXDLMJSSXEGYGSJQXCWBXSSZPDYZCXDNYXPPZYDLYJCZPLTXLSXYZYRXCYYYDYLWWNZSAHJSYQYHGYWWAXTJZDAXYSRLTDPSSYYFNEJDXYZHLXLLLZQZSJNYQYQQXYJGHZGZCYJCHZLYCDSHWSHJZYJXCLLNXZJJYYXNFXMWFPYLCYLLABWDDHWDXJMCXZTZPMLQZHSFHZYNZTLLDYWLSLXHYMMYLMBWWKYXYADTXYLLDJPYBPWUXJMWMLLSAFDLLYFLBHHHBQQLTZJCQJLDJTFFKMMMBYTHYGDCQRDDWRQJXNBYSNWZDBYYTBJHPYBYTTJXAAHGQDQTMYSTQXKBTZPKJLZRBEQQSSMJJBDJOTGTBXPGBKTLHQXJJJCTHXQDWJLWRFWQGWSHCKRYSWGFTGYGBXSDWDWRFHWYTJJXXXJYZYSLPYYYPAYXHYDQKXSHXYXGSKQHYWFDDDPPLCJLQQEEWXKSYYKDYPLTJTHKJLTCYYHHJTTPLTZZCDLTHQKZXQYSTEEYWYYZYXXYYSTTJKLLPZMCYHQGXYHSRMBXPLLNQYDQHXSXXWGDQBSHYLLPJJJTHYJKYPPTHYYKTYEZYENMDSHLCRPQFDGFXZPSFTLJXXJBSWYYSKSFLXLPPLBBBLBSFXFYZBSJSSYLPBBFFFFSSCJDSTZSXZRYYSYFFSYZYZBJTBCTSBSDHRTJJBYTCXYJEYLXCBNEBJDSYXYKGSJZBXBYTFZWGENYHHTHZHHXFWGCSTBGXKLSXYWMTMBYXJSTZSCDYQRCYTWXZFHMYMCXLZNSDJTTTXRYCFYJSBSDYERXJLJXBBDEYNJGHXGCKGSCYMBLXJMSZNSKGXFBNBPTHFJAAFXYXFPXMYPQDTZCXZZPXRSYWZDLYBBKTYQPQJPZYPZJZNJPZJLZZFYSBTTSLMPTZRTDXQSJEHBZYLZDHLJSQMLHTXTJECXSLZZSPKTLZKQQYFSYGYWPCPQFHQHYTQXZKRSGTTSQCZLPTXCDYYZXSQZSLXLZMYCPCQBZYXHBSXLZDLTCDXTYLZJYYZPZYZLTXJSJXHLPMYTXCQRBLZSSFJZZTNJYTXMYJHLHPPLCYXQJQQKZZSCPZKSWALQSBLCCZJSXGWWWYGYKTJBBZTDKHXHKGTGPBKQYSLPXPJCKBMLLXDZSTBKLGGQKQLSBKKTFXRMDKBFTPZFRTBBRFERQGXYJPZSSTLBZTPSZQZSJDHLJQLZBPMSMMSXLQQNHKNBLRDDNXXDHDDJCYYGYLXGZLXSYGMQQGKHBPMXYXLYTQWLWGCPBMQXCYZYDRJBHTDJYHQSHTMJSBYPLWHLZFFNYPMHXXHPLTBQPFBJWQDBYGPNZTPFZJGSDDTQSHZEAWZZYLLTYYBWJKXXGHLFKXDJTMSZSQYNZGGSWQSPHTLSSKMCLZXYSZQZXNCJDQGZDLFNYKLJCJLLZLMZZNHYDSSHTHZZLZZBBHQZWWYCRZHLYQQJBEYFXXXWHSRXWQHWPSLMSSKZTTYGYQQWRSLALHMJTQJSMXQBJJZJXZYZKXBYQXBJXSHZTSFJLXMXZXFGHKZSZGGYLCLSARJYHSLLLMZXELGLXYDJYTLFBHBPNLYZFBBHPTGJKWETZHKJJXZXXGLLJLSTGSHJJYQLQZFKCGNNDJSSZFDBCTWWSEQFHQJBSAQTGYPQLBXBMMYWXGSLZHGLZGQYFLZBYFZJFRYSFMBYZHQGFWZSYFYJJPHZBYYZFFWODGRLMFTWLBZGYCQXCDJYGZYYYYTYTYDWEGAZYHXJLZYYHLRMGRXXZCLHNELJJTJTPWJYBJJBXJJTJTEEKHWSLJPLPSFYZPQQBDLQJJTYYQLYZKDKSQJYYQZLDQTGJQYZJSUCMRYQTHTEJMFCTYHYPKMHYZWJDQFHYYXWSHCTXRLJHQXHCCYYYJLTKTTYTMXGTCJTZAYYOCZLYLBSZYWJYTSJYHBYSHFJLYGJXXTMZYYLTXXYPZLXYJZYZYYPNHMYMDYYLBLHLSYYQQLLNJJYMSOYQBZGDLYXYLCQYXTSZEGXHZGLHWBLJHEYXTWQMAKBPQCGYSHHEGQCMWYYWLJYJHYYZLLJJYLHZYHMGSLJLJXCJJYCLYCJPCPZJZJMMYLCQLNQLJQJSXYJMLSZLJQLYCMMHCFMMFPQQMFYLQMCFFQMMMMHMZNFHHJGTTHHKHSLNCHHYQDXTMMQDCYZYXYQMYQYLTDCYYYZAZZCYMZYDLZFFFMMYCQZWZZMABTBYZTDMNZZGGDFTYPCGQYTTSSFFWFDTZQSSYSTWXJHXYTSXXYLBYQHWWKXHZXWZNNZZJZJJQJCCCHYYXBZXZCYZTLLCQXYNJYCYYCYNZZQYYYEWYCZDCJYCCHYJLBTZYYCQWMPWPYMLGKDLDLGKQQBGYCHJXY";oMultiDiff={"19969":"DZ","19975":"WM","19988":"QJ","20048":"YL","20056":"SC","20060":"NM","20094":"QG","20127":"QJ","20167":"QC","20193":"YG","20250":"KH","20256":"ZC","20282":"SC","20285":"QJG","20291":"TD","20314":"YD","20340":"NE","20375":"TD","20389":"YJ","20391":"CZ","20415":"PB","20446":"YS","20447":"SQ","20504":"TC","20608":"KG","20854":"QJ","20857":"ZC","20911":"PF","20504":"TC","20608":"KG","20854":"QJ","20857":"ZC","20911":"PF","20985":"AW","21032":"PB","21048":"XQ","21049":"SC","21089":"YS","21119":"JC","21242":"SB","21273":"SC","21305":"YP","21306":"QO","21330":"ZC","21333":"SDC","21345":"QK","21378":"CA","21397":"SC","21414":"XS","21442":"SC","21477":"JG","21480":"TD","21484":"ZS","21494":"YX","21505":"YX","21512":"HG","21523":"XH","21537":"PB","21542":"PF","21549":"KH","21571":"E","21574":"DA","21588":"TD","21589":"O","21618":"ZC","21621":"KHA","21632":"ZJ","21654":"KG","21679":"LKG","21683":"KH","21710":"A","21719":"YH","21734":"WOE","21769":"A","21780":"WN","21804":"XH","21834":"A","21899":"ZD","21903":"RN","21908":"WO","21939":"ZC","21956":"SA","21964":"YA","21970":"TD","22003":"A","22031":"JG","22040":"XS","22060":"ZC","22066":"ZC","22079":"MH","22129":"XJ","22179":"XA","22237":"NJ","22244":"TD","22280":"JQ","22300":"YH","22313":"XW","22331":"YQ","22343":"YJ","22351":"PH","22395":"DC","22412":"TD","22484":"PB","22500":"PB","22534":"ZD","22549":"DH","22561":"PB","22612":"TD","22771":"KQ","22831":"HB","22841":"JG","22855":"QJ","22865":"XQ","23013":"ML","23081":"WM","23487":"SX","23558":"QJ","23561":"YW","23586":"YW","23614":"YW","23615":"SN","23631":"PB","23646":"ZS","23663":"ZT","23673":"YG","23762":"TD","23769":"ZS","23780":"QJ","23884":"QK","24055":"XH","24113":"DC","24162":"ZC","24191":"GA","24273":"QJ","24324":"NL","24377":"TD","24378":"QJ","24439":"PF","24554":"ZS","24683":"TD","24694":"WE","24733":"LK","24925":"TN","25094":"ZG","25100":"XQ","25103":"XH","25153":"PB","25170":"PB","25179":"KG","25203":"PB","25240":"ZS","25282":"FB","25303":"NA","25324":"KG","25341":"ZY","25373":"WZ","25375":"XJ","25384":"A","25457":"A","25528":"SD","25530":"SC","25552":"TD","25774":"ZC","25874":"ZC","26044":"YW","26080":"WM","26292":"PB","26333":"PB","26355":"ZY","26366":"CZ","26397":"ZC","26399":"QJ","26415":"ZS","26451":"SB","26526":"ZC","26552":"JG","26561":"TD","26588":"JG","26597":"CZ","26629":"ZS","26638":"YL","26646":"XQ","26653":"KG","26657":"XJ","26727":"HG","26894":"ZC","26937":"ZS","26946":"ZC","26999":"KJ","27099":"KJ","27449":"YQ","27481":"XS","27542":"ZS","27663":"ZS","27748":"TS","27784":"SC","27788":"ZD","27795":"TD","27812":"O","27850":"PB","27852":"MB","27895":"SL","27898":"PL","27973":"QJ","27981":"KH","27986":"HX","27994":"XJ","28044":"YC","28065":"WG","28177":"SM","28267":"QJ","28291":"KH","28337":"ZQ","28463":"TL","28548":"DC","28601":"TD","28689":"PB","28805":"JG","28820":"QG","28846":"PB","28952":"TD","28975":"ZC","29100":"A","29325":"QJ","29575":"SL","29602":"FB","30010":"TD","30044":"CX","30058":"PF","30091":"YSP","30111":"YN","30229":"XJ","30427":"SC","30465":"SX","30631":"YQ","30655":"QJ","30684":"QJG","30707":"SD","30729":"XH","30796":"LG","30917":"PB","31074":"NM","31085":"JZ","31109":"SC","31181":"ZC","31192":"MLB","31293":"JQ","31400":"YX","31584":"YJ","31896":"ZN","31909":"ZY","31995":"XJ","32321":"PF","32327":"ZY","32418":"HG","32420":"XQ","32421":"HG","32438":"LG","32473":"GJ","32488":"TD","32521":"QJ","32527":"PB","32562":"ZSQ","32564":"JZ","32735":"ZD","32793":"PB","33071":"PF","33098":"XL","33100":"YA","33152":"PB","33261":"CX","33324":"BP","33333":"TD","33406":"YA","33426":"WM","33432":"PB","33445":"JG","33486":"ZN","33493":"TS","33507":"QJ","33540":"QJ","33544":"ZC","33564":"XQ","33617":"YT","33632":"QJ","33636":"XH","33637":"YX","33694":"WG","33705":"PF","33728":"YW","33882":"SR","34067":"WM","34074":"YW","34121":"QJ","34255":"ZC","34259":"XL","34425":"JH","34430":"XH","34485":"KH","34503":"YS","34532":"HG","34552":"XS","34558":"YE","34593":"ZL","34660":"YQ","34892":"XH","34928":"SC","34999":"QJ","35048":"PB","35059":"SC","35098":"ZC","35203":"TQ","35265":"JX","35299":"JX","35782":"SZ","35828":"YS","35830":"E","35843":"TD","35895":"YG","35977":"MH","36158":"JG","36228":"QJ","36426":"XQ","36466":"DC","36710":"JC","36711":"ZYG","36767":"PB","36866":"SK","36951":"YW","37034":"YX","37063":"XH","37218":"ZC","37325":"ZC","38063":"PB","38079":"TD","38085":"QY","38107":"DC","38116":"TD","38123":"YD","38224":"HG","38241":"XTC","38271":"ZC","38415":"YE","38426":"KH","38461":"YD","38463":"AE","38466":"PB","38477":"XJ","38518":"YT","38551":"WK","38585":"ZC","38704":"XS","38739":"LJ","38761":"GJ","38808":"SQ","39048":"JG","39049":"XJ","39052":"HG","39076":"CZ","39271":"XT","39534":"TD","39552":"TD","39584":"PB","39647":"SB","39730":"LG","39748":"TPB","40109":"ZQ","40479":"ND","40516":"HG","40536":"HG","40583":"QJ","40765":"YQ","40784":"QJ","40840":"YK","40863":"QJG"};my.user={user_name:null,power:{},regtime:"",logintimes:"",list:"",bumen:"",store_id:"",info:{},power:{},initLoginInfo:function(){var n=this;my.stores={};my.allStores={};my.citys=[];$.each(this.info.config.stores,function(){if(my.allStores[this.store_id]=this,this.store_id<8e3&&(my.stores[this.store_id]=this),!this.city)return!0;$.inArray(this.city,my.citys)==-1&&my.citys.push(this.city)});my.bags=this.info.config.bags;my.chejians={};$.each(this.info.config.chejians,function(){my.chejians[this.chejian_id]=this});n.power={};$.each(this.info.power,function(){n.power[this]=1});my.departments={};$.each(this.info.config.departments,function(){my.departments[this.id]=this})},login:function(n,t,i,r){var u=this;my.util.send("user->userLogin",{loginid:n,password:t},function(n){if(n.status==0){u.info=n;u.initLoginInfo();i&&typeof i=="function"&&i();return}r&&typeof r=="function"&&r(n.status)})},addUser:function(n,t,i,r,u,f,e,o,s,h){var c=this;my.util.send("user->addUser",{loginid:n,password:t,user_name:i,level_name:r,bumen:u,bag_id:f,chejian_id:e,store_id:o},function(n){if(n.status!=0){h&&typeof h=="function"&&h(n.status);return}s&&typeof s=="function"&&s()})},editUser:function(n,t,i,r,u,f,e,o,s,h,c){var l=this;my.util.send("user->editUser",{loginid:t,password:i,user_name:r,level_name:u,bumen:f,bag_id:e,chejian_id:o,store_id:s,user_id:n},function(n){if(n.status!=0){c&&typeof c=="function"&&c();return}h&&typeof h=="function"&&h()})},chkLoginStatus:function(n,t){var i=this;my.util.send("user->chkStatus",{},function(r){if(r.status!=0){t&&typeof t=="function"&&t();return}i.info=r;i.initLoginInfo();n&&typeof n=="function"&&n()})},delUser:function(n,t){var i=this;my.util.send("user->delUser",{loginid:n},function(){t&&typeof t=="function"&&t()})},changePassword:function(n,t,i,r){var u=this;my.util.send("user->changePass",{oldpass:n,newpass:t},function(n){if(n.status!=0){r&&typeof r=="function"&&r(n.status);return}i&&typeof i=="function"&&i()})},logout:function(n){var t=this;my.util.send("user->logOut",{},function(){t.info={};n&&typeof n=="function"&&n()})},checkPower:function(n){return this.power.admin==1?!0:this.power[n]==1?!0:$.inArray(n,["main"])!=-1?!0:!1},returnPower:function(n){if(!this.checkPower(n))return my.view.message("权限不足，请联系管理员。")},chkTask:function(){var n=this;my.notice.clear();n.chkIE6(function(){n.chkUpdate(function(){})})},chkIE6:function(n){isIE6?my.notice.add("您当前使用的浏览器版本过低，为获取更好的使用体验，请升级至高版本IE、chrome、firefox，点击获取最新IE版本。",function(){window.location.href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie"}):n&&typeof n=="function"&&n()},chkUpdate:function(n){var t=this;my.user.checkPower("系统配置")&&my.util.send("getLastUpdate",{},function(t){var i,r;t.newday!=t.reportday?(i=new Date(t.reportday.replace("-","/")),i.setDate(i.getDate()+1),r=i.format("yyyy-MM-dd"),my.notice.add(r+"至"+t.newday+"的报表尚未生成，点击开始生成报表。",function(){my.view.load("on");my.util.send("updateReport",{},function(){my.view.message("生成报表成功！",1,function(){my.user.chkTask()})})})):n&&typeof n=="function"&&n()})},chkEditStore:function(){}};my.orderStatus={1:"<font color=red>等待发货<\/font>",2:"<font color=red>等待确认收货<\/font>",3:"<font color=blue>等待收货审核<\/font>",4:"<font color=blue>等待审核<\/font>",0:"<font color=green>已结束<\/font>"};my.goods={div:null,goodsList:[],searchResult:[],perpage:10,quick_search:!0,getOne:function(n,t){this.showList(n,t)},setEvent:function(n){var t=this;$(".submit_order",this.div).click(function(){n&&typeof n=="function"&&n($(this).data("id"));t.hide()})},showList:function(n,t){this.goodsList=n;this.searchResult=n;var r=this,i=document.createElement("div"),f=document.documentElement.clientWidth||document.body.clientWidth,u=document.documentElement.clientHeight||document.body.clientHeight,e=(f-900)/2,o=(u-500)/2;this.bg=document.createElement("div");this.bg.style.cssText="position:absolute;left:0px;top:0px;width:100%;height:"+u+"px;filter:alpha(opacity=50);-moz-opacity:0.5;-khtml-opacity: 0.5;opacity: 0.5;background:#000;z-index:10;";i.style.cssText="position:absolute;left:"+e+"px;top:"+o+"px;width:880px;height:500px;border:1px solid #f4f4f4;background:#fff;overflow:scroll;z-index:999;display:none;";$(i).append('<table border="0" cellspacing="0" cellpadding="0" id="goods_list" style="width:860px;"  class="table_goodslist"><tr>                    <th colspan="5" class="txtleft" style="background:#dedede;border-bottom:1px solid #ccc;border-top:1px solid #ccc;">                        <span style="float:left;"><b>添加物品<\/b> &nbsp;&nbsp;&nbsp;&nbsp;                        <input type="checkbox" id="quick_search" checked> 快速查询                          <a class="ico tips"><div class="tips_content" style="width:300px;"><div class="tips_arrow">◆<\/div>                            支持按                            <b><font color="red">食材编码<\/font><\/b>、                            <b><font color="red">名称<\/font><\/b>、                            <b><font color="red">名称拼音首字母<\/font><\/b>搜索。<br>                            支持多关键词搜索，关键词之间以空格分开。如搜索 <b><font color="red">010 肥牛 GL<\/font><\/b> ，即可搜索到 <b><font color="red">咖喱（加肥牛）<\/font><\/b><br>                            选中快速查询后，可即输即查，无需点击 <b><font color="red">查询<\/font><\/b> 按钮。<br>                            如电脑配置较低，出现卡机情况，请去掉“快速查询”勾选，输入关键词后，点击“查询”按钮进行搜索。                         <\/div><\/a>                        关键词：<input type="text" id="keyword" class="input3">                         <a  class="city_submit" id="search_start">查询<\/a>                        <\/span><span style="float:right"><a class="close">关闭<\/a><\/span>                        <\/th>                <\/tr>                <tr>                    <th width="100">编码<\/th>                    <th>名称<\/th>                    <th width="120">规格<\/th>                    <th width="70">单位<\/th>                    <th width="80">操作<\/th>                <\/tr><\/table>');$(document.body).append(i);this.div=i;$("#keyword",i).bind("keyup",function(){$("#quick_search",i).attr("checked")&&r.search($(this).val().trim(),t)});$("#search_start",i).bind("click",function(){r.search($("#keyword").val().trim(),t)});$("#quick_search").click(function(){r.quick_search=$(this).attr("checked")?!0:!1});$(".tips",i).unbind().bind("mouseover click",function(){$("div",this).stop().show()});$(".tips",i).bind("mouseout",function(){$("div",this).stop().hide()});$(".close",i).click(function(){r.hide()});$(i).fadeIn();$(document.body).append(this.bg);$(this.bg).bind("click",function(){r.hide()});this.search("",t)},hide:function(){$(this.div).remove();$(this.bg).hide()},search:function(n,t){var u=n.split(" "),i,r=this.goodsList,f=this;$.each(u,function(){if(n=this,!n)return!0;i=[];var t=f.getKeyType(n);$.each(r,function(){if(this.goods_type)return!0;if(t==1)this.cInvCode.toString().indexOf(n.toString())>-1&&i.push(this);else if(t==2){var r=this;$.each(this.py,function(){if(this.indexOf(n.toUpperCase().toString())>-1)return i.push(r),!1})}else t==3&&this.cInvName.toString().indexOf(n.toString())>-1&&i.push(this)});r=i});this.searchResult=i;this.insertTable(i,1,t)},getKeyType:function(n){if(!isNaN(n))return 1;return/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi.exec(n)?3:2},insertTable:function(n,t,i){var f=this,o=this.perpage,s,c,h,u,r,e;for(t||(t=1),s=Math.ceil(n.length/o),t<1&&(t=1),t>s&&(t=s),$("tr",this.div).each(function(n){if(n<2)return!0;$(this).remove()}),c=document.createDocumentFragment(),h=1;h<=o;h++)u=document.createElement("tr"),r=n[(t-1)*o+h-1]?n[(t-1)*o+h-1]:{cInvCode:"--"},u.appendChild(this.th(r.cInvCode)),u.appendChild(this.td(r.cInvName)),u.appendChild(this.td(r.cInvStd)),u.appendChild(this.td(r.cInvUnit)),r.baozhuang_num=r.baozhuang_num?r.baozhuang_num:"",r.order_nums=r.order_nums?r.order_nums:"",r.goods_type?u.appendChild(f.td(r.goods_type)):r.cInvCode=="--"?u.appendChild(f.td(r.cInvCode)):u.appendChild(f.td('<a  class="submit_order" data-code="'+r.cInvCode+'" data-id="'+r.cInvCode+'">选择<\/a>')),c.appendChild(u);$("table",this.div).append(c);e='<tr class="showpage"><th colspan="5">';e+='<a data-page="1">首页<\/a>';e+='<a data-page="'+(t-1)+'">上一页<\/a>';e+='<a data-page="'+(t+1)+'">下一页<\/a>';e+='<a data-page="'+s+'">尾页<\/a>';e+="共有"+n.length+"条记录&nbsp;&nbsp;&nbsp;&nbsp;当前第"+t+"页/"+s+"页&nbsp;&nbsp;&nbsp;&nbsp;";e+='每页显示<input type="text" style="width:30px;" id="perpage" value="'+o+'">条记录';$("table",this.div).append(e);this.setEvent(i);$(".showpage a",this.div).click(function(){var n=$(this).data("page");f.insertTable(f.searchResult,n,i)});$("#perpage",this.div).bind("change",function(){var n=parseInt($(this).val());n||(n=10);n<1&&(n=1);n>100&&(n=100);f.perpage=n;f.insertTable(f.searchResult,t,i)});$("table tr",this.div).bind("mouseover",function(){$("td",this).css("background-color","#D3F0F1")});$("table tr",this.div).bind("mouseout",function(){$("td",this).css("background-color","#fff")})},td:function(n,t){var i=document.createElement("td"),r,u;return t||(t={}),r=t.classname,u=t.colspan,r&&(i.className=r),u&&(i.colSpan=u),n||(n="&nbsp;"),i.innerHTML=n,i},th:function(n){var t=document.createElement("th");return n||(n="&nbsp;"),t.innerHTML=n,t}};my.persons={div:null,goodsList:[],searchResult:[],perpage:10,quick_search:!0,getOne:function(n,t){this.showList(n,t)},setEvent:function(n){var t=this;$(".submit_order",this.div).click(function(){n&&typeof n=="function"&&n($(this).data("id"));t.hide()})},showList:function(n,t){var u,f,e,o;this.goodsList=n;this.searchResult=n;var r=this,i=document.createElement("div"),h=document.documentElement.clientWidth||document.body.clientWidth,s=document.documentElement.clientHeight||document.body.clientHeight,c=(h-900)/2,l=(s-500)/2;i.style.cssText="position:absolute;left:"+c+"px;top:"+l+"px;width:880px;height:500px;border:1px solid #f4f4f4;background:#fff;overflow:scroll;z-index:999;display:none;";this.bg=document.createElement("div");this.bg.style.cssText="position:absolute;left:0px;top:0px;width:100%;height:"+s+"px;filter:alpha(opacity=50);-moz-opacity:0.5;-khtml-opacity: 0.5;opacity: 0.5;background:#000;z-index:10;";u="";$.each(my.departments,function(){u+='<option value="'+this.department+'">'+this.department+"<\/option>"});f="";$.each(my.stores,function(){f+='<option value="'+this.store_id+'">'+this.store_name+"<\/option>"});e="";$.each(my.bags,function(){e+='<option value="'+this.bag_id+'">'+this.bag_name+"<\/option>"});o="";$.each(my.chejians,function(){o+='<option value="'+this.chejian_id+'">'+this.chejian_name+"<\/option>"});$(i).append('<table border="0" cellspacing="0" cellpadding="0" id="goods_list" style="width:860px;"  class="table_goodslist"><tr>                    <th colspan="5" class="txtleft" style="background:#dedede;border-bottom:1px solid #ccc;border-top:1px solid #ccc;">                        <span style="float:left;"><b>选择人员<\/b> &nbsp;&nbsp;&nbsp;&nbsp;                        <input type="checkbox" id="quick_search" checked> 快速查询                          <a class="ico tips"><div class="tips_content" style="width:300px;"><div class="tips_arrow">◆<\/div>                            支持按                            <b><font color="red">ID<\/font><\/b>、                            <b><font color="red">姓名<\/font><\/b>、                            <b><font color="red">姓名拼音首字母<\/font><\/b>搜索。<br>                            支持多关键词搜索，关键词之间以空格分开。<br>                            选中快速查询后，可即输即查，无需点击 <b><font color="red">查询<\/font><\/b> 按钮。<br>                            如电脑配置较低，出现卡机情况，请去掉“快速查询”勾选，输入关键词后，点击“查询”按钮进行搜索。                         <\/div><\/a><select name="department"><option value="">选择部门<\/option>'+u+'<\/select><select name="store" style="display:none"><option value="">选择门店<\/option>'+f+'<\/select><select name="bag" style="display:none"><option value="">选择仓库<\/option>'+e+'<\/select><select name="chejian" style="display:none"><option value="">选择车间<\/option>'+o+'<\/select>                        关键词：<input type="text" id="keyword" class="input3" style="width:100px;">                         <a  class="city_submit" id="search_start">查询<\/a>                        <\/span><span style="float:right"><a class="close">关闭<\/a><\/span>                        <\/th>                <\/tr>                <tr>                    <th width="100">ID<\/th>                    <th>姓名<\/th>                    <th width="120">部门<\/th>                    <th width="70">职位<\/th>                    <th width="80">操作<\/th>                <\/tr><\/table>');$(document.body).append(i);this.div=i;$("select[name='department']",i).bind("change",function(){var n=$(this).val();$("select[name='store']",i).hide();$("select[name='bag']",i).hide();$("select[name='chejian']",i).hide();n=="门店"&&$("select[name='store']",i).show();n=="仓库"&&$("select[name='bag']",i).show();n=="加工中心"&&$("select[name='chejian']",i).show();r.search($("#keyword").val().trim(),t,n)});$("select[name='store'],select[name='bag'],select[name='chejian']",i).bind("change",function(){var n=$("select[name='department']",i).val(),u=$(this).val();r.search($("#keyword").val().trim(),t,n,u)});$("#keyword",i).bind("keyup",function(){if($("#quick_search",i).attr("checked")){var n=$("select[name='department']",i).val(),u=$("select[name='store']",i).val()||$("select[name='bag']",i).val()||$("select[name='chejian']",i).val();r.search($(this).val().trim(),t,n,u)}});$("#search_start",i).bind("click",function(){var n=$("select[name='department']",i).val(),u=$("select[name='store']",i).val()||$("select[name='bag']",i).val()||$("select[name='chejian']",i).val();r.search($("#keyword").val().trim(),t,n,u)});$("#quick_search").click(function(){r.quick_search=$(this).attr("checked")?!0:!1});$(".tips",i).unbind().bind("mouseover click",function(){$("div",this).stop().show()});$(".tips",i).bind("mouseout",function(){$("div",this).stop().hide()});$(document.body).append(this.bg);$(this.bg).bind("click",function(){r.hide()});$(".close",i).click(function(){r.hide()});$(i).fadeIn();this.search("",t)},hide:function(){$(this.div).remove();$(this.bg).hide()},search:function(n,t,i,r){var e=n.split(" "),u,f=this.goodsList,o=this;$.each(e,function(){if(n=this,!n)return!0;u=[];var t=o.getKeyType(n);$.each(f,function(){if(i&&this.department!=i||i=="门店"&&r&&this.store_id!=r||i=="加工中心"&&r&&this.chejian_id!=r||i=="仓库"&&r&&this.bag_id!=r||this.goods_type)return!0;if(t==1)this.id.toString().indexOf(n.toString())>-1&&u.push(this);else if(t==2){var f=this;$.each(this.py,function(){if(this.indexOf(n.toUpperCase().toString())>-1)return u.push(f),!1})}else t==3&&this.true_name.toString().indexOf(n.toString())>-1&&u.push(this)});f=u});this.searchResult=u;this.insertTable(u,1,t)},getKeyType:function(n){if(!isNaN(n))return 1;return/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi.exec(n)?3:2},insertTable:function(n,t,i){var f=this,o=this.perpage,s,c,h,u,r,e;for(t||(t=1),s=Math.ceil(n.length/o),t<1&&(t=1),t>s&&(t=s),$("tr",this.div).each(function(n){if(n<2)return!0;$(this).remove()}),c=document.createDocumentFragment(),h=1;h<=o;h++)u=document.createElement("tr"),r=n[(t-1)*o+h-1]?n[(t-1)*o+h-1]:{id:"--"},u.appendChild(this.th(r.id)),u.appendChild(this.td(r.true_name)),u.appendChild(this.td(r.department=="门店"?"门店（"+getStoreName(r.store_id)+"）":r.department=="仓库"?"仓库（"+getBagName(r.bag_id)+"）":r.department=="加工中心"?"加工中心（"+getChejianName(r.chejian_id)+"）":r.department)),u.appendChild(this.td(r.job)),r.baozhuang_num=r.baozhuang_num?r.baozhuang_num:"",r.order_nums=r.order_nums?r.order_nums:"",r.goods_type?u.appendChild(f.td(r.goods_type)):r.id=="--"?u.appendChild(f.td(r.id)):u.appendChild(f.td('<a  class="submit_order" data-code="'+r.id+'" data-id="'+r.id+'">选择<\/a>')),c.appendChild(u);$("table",this.div).append(c);e='<tr class="showpage"><th colspan="5">';e+='<a data-page="1">首页<\/a>';e+='<a data-page="'+(t-1)+'">上一页<\/a>';e+='<a data-page="'+(t+1)+'">下一页<\/a>';e+='<a data-page="'+s+'">尾页<\/a>';e+="共有"+n.length+"条记录&nbsp;&nbsp;&nbsp;&nbsp;当前第"+t+"页/"+s+"页&nbsp;&nbsp;&nbsp;&nbsp;";e+='每页显示<input type="text" style="width:30px;" id="perpage" value="'+o+'">条记录';$("table",this.div).append(e);this.setEvent(i);$(".showpage a",this.div).click(function(){var n=$(this).data("page");f.insertTable(f.searchResult,n,i)});$("#perpage",this.div).bind("change",function(){var n=parseInt($(this).val());n||(n=10);n<1&&(n=1);n>100&&(n=100);f.perpage=n;f.insertTable(f.searchResult,t,i)});$("table tr",this.div).bind("mouseover",function(){$("td",this).css("background-color","#D3F0F1")});$("table tr",this.div).bind("mouseout",function(){$("td",this).css("background-color","#fff")})},td:function(n,t){var i=document.createElement("td"),r,u;return t||(t={}),r=t.classname,u=t.colspan,r&&(i.className=r),u&&(i.colSpan=u),n||(n="&nbsp;"),i.innerHTML=n,i},th:function(n){var t=document.createElement("th");return n||(n="&nbsp;"),t.innerHTML=n,t}};my.querypage={show:function(n,t,i,r,u,f){var s=document.createDocumentFragment(),e="",o=Math.ceil(t/i);r<1&&(r=1);r>o&&(r=o);e+='<a data-page="1">首页<\/a>';e+='<a data-page="'+(r-1)+'">上一页<\/a>';e+='<a data-page="'+(r+1)+'">下一页<\/a>';e+='<a data-page="'+o+'">尾页<\/a>';e+="共有"+t+"条记录&nbsp;&nbsp;&nbsp;&nbsp;当前第"+r+"页/"+o+"页&nbsp;&nbsp;&nbsp;&nbsp;";e+='每页显示<input type="text" style="width:30px;" value="'+i+'" name="perpage">条记录';$(s).append(e);$(n).append(s);$("a",$(n)).bind("click",function(){var n=$(this).data("page");u&&typeof u=="function"&&u(n)});$('input[name="perpage"]',$(n)).bind("change",function(){var n=parseInt($(this).val());isNaN(n)&&(n=10);n<1&&(n=1);n>100&&(n=100);f&&typeof f=="function"&&f(n)})}};my.userlevel={addLevel:function(n,t,i){my.util.send("userlevel->addLevel",{name:n,power:t},function(n){if(n.status==1)return my.view.message("用户组已存在，请重试！");if(n.status==2)return my.view.message("请输入用户组名和权限！");i&&typeof i=="function"&&i()})},delLevel:function(n,t){my.util.send("userlevel->delLevel",{name:n},function(n){if(n.status==1)return my.view.message("用户组已存在用户，请先删除用户后重试！");t&&typeof t=="function"&&t()})},editLevel:function(n,t,i,r){if(!t)return my.view.message("请输入用户组名称！");my.util.send("userlevel->editLevel",{name:n,newname:t,power:i},function(n){if(n.status==1)return my.view.message("用户组已存在，请重试！");if(n.status==2)return my.view.message("请输入用户组名和权限！");r&&typeof r=="function"&&r()})},getPowerList:function(){$.each(my.menu,function(){})},checkPower:function(){}};my.chejian={add:function(n,t,i,r){my.util.send("chejian->add",{chejian_id:n,chejian_name:t},function(n){if(n.status===0){i&&typeof i=="function"&&i();return}r&&typeof r=="function"&&r(n.status)})},edit:function(n,t,i,r,u){my.util.send("chejian->edit",{chejian_id:t,chejian_name:i,id:n},function(n){if(n.status===0){r&&typeof r=="function"&&r();return}u&&typeof u=="function"&&u(n.status)})},del:function(n,t,i){my.util.send("chejian->del",{id:n},function(n){if(n.status===0){t&&typeof t=="function"&&t();return}i&&typeof i=="function"&&i(n.status)})}};my.shuidian={addType:function(n,t,i,r){my.util.send("shuidian->addType",{biao_name:n,biao_type:t,istotal:i},function(n){if(n.status==1)return my.view.message("请输入表名和表类别！");if(n.status==2)return my.view.message("该类型的表已存在总表，请勿再添加总表！");r&&typeof r=="function"&&r()})},editType:function(n,t,i,r,u){my.util.send("shuidian->editType",{biao_type_id:n,biao_name:t,biao_type:i,istotal:r},function(n){if(n.status==1)return my.view.message("请输入表名和表类别！");if(n.status==2)return my.view.message("该类型的表已存在总表，请勿再添加总表！");u&&typeof u=="function"&&u()})},delType:function(n,t){my.util.send("shuidian->delType",{biao_type_id:n},function(){t&&typeof t=="function"&&t()})},editBiao:function(n,t){my.util.send("shuidian->editBiao",{biao_type_ids:n.ids,store_id:n.store_id||"",bag_id:n.bag_id||"",chejian_id:n.chejian_id||""},function(n){if(n.status!=0)return my.view.message("配置水电表失败！");t&&typeof t=="function"&&t()})},editPrice:function(n,t){my.util.send("shuidian->editPrice",{list:n.list,store_id:n.store_id||"",bag_id:n.bag_id||"",chejian_id:n.chejian_id||""},function(n){if(n.status==1)return my.view.message("没有找到需要配置的表！");if(n.status==2)return my.view.message("倍率至少为1倍！");if(n.status==3)return my.view.message("单价必须大于0！");if(n.status==4)return my.view.message("生效日期格式错误！");if(n.status==5)return my.view.message("没有找到需要配置的表！");if(n.status!=0)return my.view.message("配置水电表参数失败！");t&&typeof t=="function"&&t()})},editZhishu:function(n,t){my.util.send("shuidian->editZhishu",{list:n.list,usedate:n.usedate||"",store_id:n.store_id||"",bag_id:n.bag_id||"",chejian_id:n.chejian_id||""},function(n){if(n.status==1)return my.view.message("请录入至少一项数据！");if(n.status==2)return my.view.message("表不存在！");if(n.status==3)return my.view.message("表的单价和倍率未设置或录入日期早于生效日期，无法录入数据！");if(n.status==4)return my.view.message("没有录入期初数据时，该日指数不能小于前一天的指数！");t&&typeof t=="function"&&t()})}};my.order={getList:function(n,t,i,r){var f=this,s={order_id:["单据编号","td","","txtleft"],store_id:["制单部门","td","90"],chejian_id:["制单部门","td","90"],use_name:["订货人","td","90"],order_date:["订货日期","td","90"],order_name:["订单类别","td","90"],statusTxt:["处理状态","td","90"],order_type:["订单类别","td","90"],bagname:["仓库","td","90"],vendorname:["供应商","td","90"],storename:["调入门店","td","90"],senddate:["发货日期","td","90"],send_user_name:["发货人","td","90"],recv_user_name:["收货人","td","90"],recvdate:["收货日期","td","90"],passdate:["审核日期","td","90"],pass_user_name:["审核人","td","90"],user_name:["制单人","td","90"],goods_type:["分类","td","90"],adddate:["登记日期","td","90"]},h=t.length,c,u,e,o;return i&&h++,c="",u=document.createElement("table"),u.className="data-load",u.border=0,u.cellPadding=0,u.cellSpacing=0,e=document.createElement("tbody"),u.appendChild(e),o=document.createElement("tr"),$.each(t,function(){var n=s[this];if(this=="select")return o.appendChild(f.td("选择",{type:"th",width:36})),!0;o.appendChild(f.td(n[0],{type:"th",width:n[2]?n[2]:"",classname:n[3]?n[3]:""}))}),i&&o.appendChild(f.td("操作",{type:"th",width:120})),e.appendChild(o),$.each(n,function(){var n=document.createElement("tr"),u=this,o;$.each(t,function(){if(this=="select")return n.appendChild(f.td('<input type="checkbox" name="check_order" value="'+u.order_id+'">',{type:"th"})),!0;var t=u[this];this=="order_id"&&(t="<a>"+t+"<\/a>");this=="store_id"&&(t=getStoreName(t)||getChejianName(u.chejian_id)||"仓库");n.appendChild(f.td(t,{classname:s[this][3]?s[this][3]:""}))});i&&(o='<a class="submit_order">'+i.txt+"<\/a>",r&&(o+='<a class="submit_order" style="margin-left:10px;">'+r.txt+"<\/a>"),n.appendChild(f.td(o)));$("a",n).bind("click",function(){i.cb(u.order_id)});r&&$("a.submit_order",n).eq(1).unbind().bind("click",function(){r.cb(u.order_id)});e.appendChild(n)}),t[0]=="select"?$(e).append('<tr class="showpage"><th colspan="'+h+'"><input type="checkbox" name="check_all"> 全选<span class="city_submit"  id="submit_order" >合并查看选中单据<\/span>&nbsp;&nbsp;&nbsp;&nbsp;<\/th><\/tr>'):$(e).append('<tr class="showpage"><th colspan="'+h+'"><\/th><\/tr>'),u},getContent:function(n,t,i,r,u,f,e){var h=this,v={type_name:["分类","td","80"],bianhao:["编码","td","80"],name:["名称","td","","txtleft"],order_nums:["订货数量","td","60"],order_nums_edit:["订货数量","td","60"],guige:["规格","td","90"],kucun_danwei:["单位","td","40"],real_send:["实发","",40,"real_send"],real_recv:["实收","",40],chayi:["差异","",40,"chayi"],chayi_yuanyin:["差异原因","",100],cost:["单价","",90],real_send_edit:["实发","",70],real_recv_edit:["实收","","70"],chayi_yuanyin_edit:["差异原因","","100"],baosun_num:["报损数量","","100"],baosun_yuanyin:["报损原因","","150"]},a=document.createElement("table"),s,o,c,l;return a.className="data-load",a.border=0,a.cellPadding=0,a.cellSpacing=0,c=document.createElement("tbody"),a.appendChild(c),l=r.length,f?(s=document.createElement("tr"),o="",e&&(o+='<span style="float:right;padding-right:20px;"><a class="city_submit" id="print_order" target="_blank" href="#">打印出库单<\/a><\/span>'),s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s)):n.order_type==8?(s=document.createElement("tr"),o='<span class="order_info_1" style="width:180px;">单据类别：<span class="order_info_txt" style="width:100px;">退库出库单<\/span><\/span>',o+='<span class="order_info_1" style="width:180px;">退库日期：<span class="order_info_txt" style="width:100px;">'+n.order_date+"<\/span><\/span>",u&&(o+='<span style="float: right;padding-right:20px;">                <a class="city_submit" id="submit_order" data-id="'+n.order_id+'" data-status="1">'+u+"<\/a>            <\/span>"),s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s)):n.order_type==7?(s=document.createElement("tr"),o='<span class="order_info_1" style="width:180px;">单据类别：<span class="order_info_txt" style="width:100px;">补发出库单<\/span><\/span>',o+='<span class="order_info_1" style="width:180px;">补发日期：<span class="order_info_txt" style="width:100px;">'+n.order_date+"<\/span><\/span>",u&&(o+='<span style="float: right;padding-right:20px;">                <a class="city_submit" id="submit_order" data-id="'+n.order_id+'" data-status="1">'+u+"<\/a>            <\/span>"),s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s)):n.order_type==6?(s=document.createElement("tr"),o='<span class="order_info_1" style="width:180px;">单据类别：<span class="order_info_txt" style="width:100px;">成品报损登记单<\/span><\/span>',o+='<span class="order_info_1" style="width:180px;">报损日期：<span class="order_info_txt" style="width:100px;">'+n.order_date+"<\/span><\/span>",o+='<span class="order_info_1" style="width:180px;">报损部门：<span class="order_info_txt" style="width:100px;">'+(getStoreName(n.store_id)||getChejianName(n.chejian_id))+"<\/span><\/span>",u&&(o+='<span style="float: right;padding-right:20px;">                <a class="city_submit" id="submit_order" data-id="'+n.order_id+'" data-status="1">'+u+"<\/a>            <\/span>"),s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s)):n.order_type==5?(s=document.createElement("tr"),o='<span class="order_info_1" style="width:180px;">单据类别：<span class="order_info_txt" style="width:100px;">材料报损登记单<\/span><\/span>',o+='<span class="order_info_1" style="width:180px;">报损日期：<span class="order_info_txt" style="width:100px;">'+n.order_date+"<\/span><\/span>",o+='<span class="order_info_1" style="width:180px;">报损部门：<span class="order_info_txt" style="width:100px;">'+(getStoreName(n.store_id)||getChejianName(n.chejian_id))+"<\/span><\/span>",u&&(o+='<span style="float: right;padding-right:20px;">                <a class="city_submit" id="submit_order" data-id="'+n.order_id+'" data-status="1">'+u+"<\/a>            <\/span>"),s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s)):n.order_type==4?(s=document.createElement("tr"),o='<span class="order_info_1" style="width:180px;">单据类别：<span class="order_info_txt" style="width:100px;">'+n.order_name+"<\/span><\/span>",o+='<span class="order_info_1" style="width:240px;">单据编号：<span class="order_info_txt" style="width:160px;">'+n.order_id+"<\/span><\/span>",o+='<span class="order_info_1" style="width:180px;">盘点日期：<span class="order_info_txt" style="width:100px;">'+n.order_date+"<\/span><\/span>",o+='<span class="order_info_1" style="width:180px;">盘点部门：<span class="order_info_txt" style="width:100px;">'+(getStoreName(n.store_id)||getChejianName(n.chejian_id))+"<\/span><\/span>",u&&(o+='<span style="float: right;padding-right:20px;">                <a class="city_submit" id="submit_order" data-id="'+n.order_id+'" data-status="1">'+u+"<\/a>            <\/span>"),s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s)):(s=document.createElement("tr"),o='<span class="order_info_1" style="width:180px;">单据类别：<span class="order_info_txt" style="width:100px;">'+n.order_name+"<\/span><\/span>",o+='<span class="order_info_1" style="width:240px;">单据编号：<span class="order_info_txt" style="width:160px;">'+n.order_id+"<\/span><\/span>",o+='<span class="order_info_1" style="width:180px;">处理状态：<span class="order_info_txt" style="width:100px;">'+n.statusTxt+"<\/span><\/span>",u&&(o+='<span style="float: right;padding-right:20px;">                <a class="city_submit" id="submit_order" data-id="'+n.order_id+'" data-status="1">'+u+"<\/a>            <\/span>"),e&&(o+='<span style="float:right;padding-right:20px;"><a class="city_submit" id="print_order" target="_blank" href="#">打印出库单<\/a><\/span>'),s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s),s=document.createElement("tr"),o='<span class="order_info_1">制单部门：<span class="order_info_txt">'+(getStoreName(n.store_id)||getChejianName(n.chejian_id))+"<\/span><\/span>",o+='<span class="order_info_1">制单人：<span class="order_info_txt">'+n.user_name+"<\/span><\/span>",o+='<span class="order_info_1">制单日期：<span class="order_info_txt">'+n.adddate+"<\/span><\/span>",s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s),n.order_type!=3&&(n.status>1||n.status==0)&&(s=document.createElement("tr"),n.order_type==1?o='<span class="order_info_1">发货部门：<span class="order_info_txt">'+n.bagname+"<\/span><\/span>":n.order_type==2&&(o='<span class="order_info_1" style="width:340px;">发货部门：<span class="order_info_txt" style="width:260px;">'+n.vendorname+"<\/span><\/span>"),n.order_type==1&&(o+='<span class="order_info_1">发货人：<span class="order_info_txt">'+n.send_user_name+"<\/span><\/span>",o+='<span class="order_info_1">发货日期：<span class="order_info_txt">'+n.order_date+"<\/span><\/span>"),s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s)),(n.status==3||n.status==0)&&n.order_type!=2&&(s=document.createElement("tr"),o='<span class="order_info_1">确认人：<span class="order_info_txt">'+(n.recv_user_name?n.recv_user_name:"")+"<\/span><\/span>",o+='<span class="order_info_1">确认日期：<span class="order_info_txt">'+(n.recvdate?n.recvdate:"")+"<\/span><\/span>",s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s)),n.order_type!=3&&n.status==0&&(s=document.createElement("tr"),o='<span class="order_info_1">审核人：<span class="order_info_txt">'+(n.pass_user_name?n.pass_user_name:"")+"<\/span><\/span>",o+='<span class="order_info_1">审核日期：<span class="order_info_txt">'+(n.passdate?n.passdate:"")+"<\/span><\/span>",s.appendChild(h.td(o,{type:"th",classname:"txtleft",colspan:l})),c.appendChild(s))),s=document.createElement("tr"),$.each(r,function(){var t=v[this];if(this=="order_nums"&&(n.order_type==7||n.order_type==8))return s.appendChild(h.td("数量",{type:"th",width:t[2]?t[2]:"",classname:t[3]?t[3]:""})),!0;if(this=="order_nums"&&(n.order_type==5||n.order_type==6))return s.appendChild(h.td("报损数量",{type:"th",width:t[2]?t[2]:"",classname:t[3]?t[3]:""})),!0;if(this=="order_nums"&&n.order_type==4)return s.appendChild(h.td("盘点数量",{type:"th",width:t[2]?t[2]:"",classname:t[3]?t[3]:""})),!0;s.appendChild(h.td(t[0],{type:"th",width:t[2]?t[2]:"",classname:t[3]?t[3]:""}))}),c.appendChild(s),$.each(t,function(){var f=document.createElement("tr"),t=this;$.each(r,function(){var r,e,o;if(u=="修改"){if(this=="order_nums_edit")return f.appendChild(h.td('<input type="text" name="order_nums" class="input4" value="'+t.order_nums+'" data-id="'+t.bianhao+'" style="width:36px;">',{})),!0;if(this=="real_send_edit")return f.appendChild(h.td('<input type="text" name="real_send" class="input4" value="'+t.real_send+'" data-id="'+t.bianhao+'" style="width:36px;">',{})),!0;if(this=="real_recv_edit")return f.appendChild(h.td('<input type="text" name="real_recv" class="input4" value="'+t.real_recv+'" data-id="'+t.bianhao+'" style="width:36px;">',{})),!0;if(this=="chayi_yuanyin_edit")return f.appendChild(h.td('<input type="text" name="chayi_yuanyin" class="input4" value="'+t.chayi_yuanyin+'" data-id="'+t.bianhao+'" style="width:36px;">',{})),!0}else{if(this=="real_send_edit")return f.appendChild(h.td('<input type="text" name="shifa_num" class="input4" value="'+t.order_nums+'" data-id="'+t.bianhao+'" style="width:36px;">',{})),!0;if(this=="real_recv_edit")return f.appendChild(h.td('<input type="text" name="shishou_num" class="input4" value="'+t.real_send+'" data-id="'+t.bianhao+'" style="width:36px;">',{})),!0;if(this=="chayi_yuanyin_edit")return f.appendChild(h.td('<input type="text" name="chayi_yuanyin" class="input4"  data-id="'+t.bianhao+'" style="width:66px;">',{})),!0}if(r=t[this],this=="chayi"&&(r=n.status<3?"":parseInt(parseFloat(t.real_recv*1e4)-parseFloat(t.real_send*1e4))/1e4),e="",o="td",this=="type_name"){if(t.total!=1)return!0;e=i[t.type_name];o="th";r||(r="临时增加")}f.appendChild(h.td(r,{classname:v[this][3]?v[this][3]:"",rowspan:e,type:o}))});$("a",f).bind("click",function(){u.cb(t.order_id)});c.appendChild(f)}),a},td:function(n,t){t=t||{};var r=t.type?t.type:"td",i=document.createElement(r);return t.classname&&(i.className=t.classname),t.colspan&&(i.colSpan=t.colspan),t.rowspan&&(i.rowSpan=t.rowspan),t.width&&(i.width=t.width),i.innerHTML=n?n:"&nbsp;",i}};my.node={nodelist:{},nodes:{},starttime:null,el:null,mode:"base",loadSource:function(n,t){var r=this,i,u;this.el=t;this.mode="base";this.nodelist={};this.nodes={};$.each(n,function(){r.nodelist[this.code]=this});i={code:"编号",name:"项目名称",level:0,parentcode:""};u=new my.child(i);this.nodes=u;$.each(this.nodelist,function(){r.createChild(this)});this.nodes.open();$(t).append(this.nodes.fresh());this.nodelist["编号"]=i;this.nodelist["编号"].ref=this.nodes;this.bindEvent()},getChildByCode:function(n){return this.nodelist[n].ref},createChild:function(n){var t,i;if(n){if(t=new my.child(n),n.parentcode)if(this.nodelist[n.parentcode]&&this.nodelist[n.parentcode].ref)this.nodelist[n.parentcode].ref.addChild(t);else{if(!this.nodelist[n.parentcode])return;i=this.createChild(this.nodelist[n.parentcode]);i.addChild(t)}else n.parentcode="编号",t.parentcode="编号",this.nodes.addChild(t);return n.ref=t,t}},getTime:function(){return(new Date).getTime()},runTime:function(){console.log(this.getTime()-this.starttime)},bindEvent:function(){var n=this;$(".node_ul",this.el).unbind().bind("mouseover",function(){n.mode!="edit"&&$(this).css("background-color","#D3F0F1").find(".node_edit").show()});$(".node_ul",this.el).bind("mouseout",function(){$(this).css("background-color","#F5F5F5").find(".node_edit").hide()});$("a",this.el).unbind().bind("click",function(t){if(t.stopPropagation(),n.mode!="edit"){var i=$(this).data("code"),r=$(this).data("type");n.clickEvent(i,r)}});$(".node_ul",this.el).bind("click",function(){if(n.mode!="edit"){var t=$(this).data("code");t&&t!="编号"&&n.getChildByCode(t).changeStatus()}})},clickEvent:function(n,t){var i=this;console.log(n);t=="add"?i.addChild(n):t=="del"?confirm("是否确定删除？删除后将不可恢复！")&&my.util.send("yusuan->delItem",{code:n},function(t){if(t.status!=0)return my.view.message("删除失败！");i.nodelist[i.nodelist[n].parentcode].ref.delChild(n)}):t=="edit"&&i.editChild(n)},addChild:function(n){var u=this,t=this.getChildByCode(n),i;t.status==0&&t.changeStatus();var f=t.createChildCode(),o={code:f,name:"",parentcode:n,level:t.level+1},r=new my.child(o),e=t.getChildDom();e.length==0&&(t.getDom().after('<div class="node_childs" id="child'+t.code+'"><\/div>'),e=t.getChildDom());$(e).prepend(r.editHtml());i=e;this.mode="edit";$("a",i).unbind().bind("click",function(e){e.stopPropagation();var s=$(this).data("type"),h=$("input[name='code']",i).val();s=="editcancel"?($("#code"+f).remove(),u.mode="base",u.bindEvent()):s=="editsubmit"&&my.util.send("yusuan->addItem",{code:$("input[name='code']",i).val(),parentcode:n=="编号"?"":n,name:$("input[name='name']",i).val(),isitem:0},function(n){if(n.status==1)return my.view.message("请输入项目名称和编号！");if(n.status==2)return my.view.message("存在重复的项目编号，请更换重试！");if(n.status==3)return my.view.message("父类编号不存在！");if(n.status!=0)return my.view.message("添加失败，请重试！");my.view.message("添加成功！",1,function(){r.getDom().attr("id","code"+h);o.code=$("input[name='code']",i).val();r.code=$("input[name='code']",i).val();r.name=$("input[name='name']",i).val();t.addChild(r);u.nodelist[f]=o;u.nodelist[f].ref=r;u.mode="base";r.setBaseType();u.bindEvent()})})})},editChild:function(n){var i=this,t=this.getChildByCode(n),r;this.mode="edit";t.setEditMode();r=t.getDom();$("a",r).unbind().bind("click",function(u){u.stopPropagation();var e=$(this).data("type"),f=$("input[name='code']",r).val();e=="editcancel"?(t.setBaseType(),i.mode="base",i.bindEvent()):e=="editsubmit"&&my.util.send("yusuan->editItem",{code:n,newcode:f,name:$("input[name='name']",r).val(),isitem:0},function(u){if(u.status==1)return my.view.message("请输入项目名称和编号！");if(u.status==2)return my.view.message("存在重复的项目编号，请更换重试！");if(u.status==3)return my.view.message("父类编号不存在！");if(u.status!=0)return my.view.message("添加失败，请重试！");my.view.message("修改成功！",1,function(){t.getDom().attr("id","code"+f);t.code=f;t.name=$("input[name='name']",r).val();i.nodelist[f]={name:t.name,code:t.code,parentcode:t.parentcode};i.nodelist[f].ref=t;f!=n&&delete i.nodelist[n];i.mode="base";t.setBaseType();i.bindEvent()})})})}};my.child=function(n){n&&(this.code=n.code,this.name=n.name,this.kemu=n.kemu,this.parentcode=n.parentcode,this.level=n.level,this.status=n.status?1:0,this.childs=[])};my.child.prototype={createChildCode:function(){if($.isEmptyObject(this.childs))return this.code+"01";var n="";return $.each(this.childs,function(){n=parseInt(this.code)+1}),n},changeStatus:function(){return this.status==1?this.close():this.open()},addChild:function(n){return this.childs.push(n),n.setLevel(this.level+1),this},setLevel:function(n){return this.level=n,this},open:function(){return $.isEmptyObject(this.childs)||(this.status=1,$(".node_ico",this.getDom()).removeClass("ico_close").addClass("ico_open"),this.getChildDom().slideToggle()),this},close:function(){return $.isEmptyObject(this.childs)||(this.status=0,$(".node_ico",this.getDom()).removeClass("ico_open").addClass("ico_close"),this.getChildDom().slideToggle()),this},show:function(){$(this.getDom()).show();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.show()})},hide:function(){$(this.getDom()).hide();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.hide()})},remove:function(){this.getDom().remove();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.remove()})},delChild:function(n){var t=this;$.each(this.childs,function(i){if(this.code==n)return this.remove(),delete t.childs[i],!1})},fresh:function(){var t=this,n;return $.isEmptyObject(this.childs)?this.getHtml():(n=this.getHtml(),n+='<div class=node_childs id="child'+this.code+'" '+(this.level!=0?'style="display:none"':"")+">",$.each(this.childs,function(){n+=this.fresh()}),n+="<\/div>")},getHtml:function(){return'<div class="node_ul" id="code'+this.code+'" data-code="'+this.code+'"><div class="node_title">            <span class="node_space">'+new Array(this.level+1).join("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")+'<\/span>            <span class="'+(this.status?"ico_open":$.isEmptyObject(this.childs)?"ico_open":"ico_close")+' node_ico"><\/span>            <span class="node_title_txt">'+this.name+'<\/span><\/div>            <div class="node_code">'+this.code+'<\/div>            <div class="node_submit"><a data-type="editsubmit" code="'+this.code+'">确认<\/a><a data-type="editcancel" code="'+this.code+'">取消<\/a><\/div>            <div class="node_edit"><a data-type="add" data-code="'+this.code+'">[新增子类]<\/a>            <a data-type="edit" data-code="'+this.code+'">[修改]<\/a>            <a data-type="del" data-code="'+this.code+'">[删除]<\/a><\/div><\/div>'},getDom:function(){return $("#code"+this.code)},getChildDom:function(){return $("#child"+this.code)},setBaseType:function(){var n=this.getDom();$(".node_title_txt",n).html(this.name);$(".node_code",n).html(this.code);$(".node_submit",n).hide();$(n).data("code",this.code);$("a",n).data("code",this.code)},setEditMode:function(){var n=this.getDom();return $(".node_title_txt",n).html('<input type="text" name="name" value="'+this.name+'" style="width:150px;">'),$(".node_code",n).html('<input type="text" name="code" value="'+this.code+'" style="width:80px;">'),$(".node_edit",n).hide(),$(".node_submit",n).show(),this},editHtml:function(){return'<div class="node_ul" id="code'+this.code+'" data-code="'+this.code+'"><div class="node_title">            <span class="node_space">'+new Array(this.level+1).join("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")+'<\/span>            <span class="ico_open node_ico"><\/span>            <span class="node_title_txt"><input type="text" name="name" value="" style="width:150px;"><\/span><\/div>            <div class="node_code"><input type="text" name="code" value="'+this.code+'" style="width:80px;"><\/div>            <div class="node_submit" style="display:block"><a data-type="editsubmit" code="'+this.code+'">确认<\/a><a data-type="editcancel" code="'+this.code+'">取消<\/a><\/div>            <div class="node_edit"><a data-type="add" data-code="'+this.code+'">[新增子类]<\/a>            <a data-type="edit" data-code="'+this.code+'">[修改]<\/a>            <a data-type="del" data-code="'+this.code+'">[删除]<\/a><\/div><\/div>'}};my.node_menu={nodelist:{},nodes:{},starttime:null,el:null,mode:"base",loadSource:function(n,t){var r=this,i,u;this.el=t;this.mode="base";this.nodelist={};this.nodes={};$.each(n,function(){r.nodelist[this.code]=this});i={code:"编号",name:"项目名称",level:0,parentcode:""};u=new my.child_menu(i);this.nodes=u;$.each(this.nodelist,function(){r.createChild(this)});this.nodes.open();$(t).append(this.nodes.fresh());this.nodelist["编号"]=i;this.nodelist["编号"].ref=this.nodes;this.bindEvent()},getChildByCode:function(n){return this.nodelist[n].ref},createChild:function(n){var t,i;if(n){if(t=new my.child_menu(n),n.parentcode)if(this.nodelist[n.parentcode]&&this.nodelist[n.parentcode].ref)this.nodelist[n.parentcode].ref.addChild(t);else{if(!this.nodelist[n.parentcode])return;i=this.createChild(this.nodelist[n.parentcode]);i.addChild(t)}else t.parentcode="编号",this.nodes.addChild(t);return n.ref=t,t}},getTime:function(){return(new Date).getTime()},runTime:function(){console.log(this.getTime()-this.starttime)},bindEvent:function(){var n=this;$(".node_ul",this.el).unbind().bind("mouseover",function(){n.mode!="edit"&&$(this).css("background-color","#53E2E6")});$(".node_ul",this.el).bind("mouseout",function(){$(this).data("isclick")||$(this).css("background-color","#e5e5e5")});$(".node_ico",this.el).bind("click",function(){if(n.mode!="edit"){var t=$(this).parent().parent().data("code");t&&t!="编号"&&n.getChildByCode(t).changeStatus()}})}};my.child_menu=function(n){n&&(this.code=n.code,this.name=n.name,this.kemu=n.kemu,this.parentcode=n.parentcode,this.level=n.level,this.status=n.status?1:0,this.childs=[])};my.child_menu.prototype={createChildCode:function(){if($.isEmptyObject(this.childs))return this.code+"01";var n="";return $.each(this.childs,function(){n=parseInt(this.code)+1}),n},changeStatus:function(){return this.status==1?this.close():this.open()},addChild:function(n){return this.childs.push(n),n.setLevel(this.level+1),this},setLevel:function(n){return this.level=n,this},open:function(){return $.isEmptyObject(this.childs)||(this.status=1,$(".node_ico",this.getDom()).removeClass("ico_close").addClass("ico_open"),this.getChildDom().slideToggle()),this},close:function(){return $.isEmptyObject(this.childs)||(this.status=0,$(".node_ico",this.getDom()).removeClass("ico_open").addClass("ico_close"),this.getChildDom().slideToggle()),this},show:function(){$(this.getDom()).show();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.show()})},hide:function(){$(this.getDom()).hide();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.hide()})},remove:function(){this.getDom().remove();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.remove()})},delChild:function(n){var t=this;$.each(this.childs,function(i){if(this.id==n)return this.remove(),delete t.childs[i],!1})},fresh:function(){var t=this,n;return $.isEmptyObject(this.childs)?this.getHtml():(n=this.getHtml(),n+='<div class=node_childs id="child_more'+this.code+'" '+(this.level!=0?'style="display:none"':"")+">",$.each(this.childs,function(){n+=this.fresh()}),n+="<\/div>")},getHtml:function(){return'<div class="node_ul" id="code_more'+this.code+'" data-code="'+this.code+'"><div class="node_title">            <span class="node_space">'+new Array(this.level+1).join("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")+'<\/span>            <span class="'+(this.status?"ico_open":$.isEmptyObject(this.childs)?"ico_open":"ico_close")+' node_ico"><\/span>            <span class="node_title_txt">'+this.name+'<\/span><\/div>            <div class="node_code">'+this.code+"<\/div><\/div>"},getDom:function(){return $("#code_more"+this.code)},getChildDom:function(){return $("#child_more"+this.code)},setBaseType:function(){var n=this.getDom();$(".node_title_txt",n).html(this.name);$(".node_code",n).html(this.code);$(".node_submit",n).hide();$(n).data("code",this.code);$("a",n).data("code",this.code)}};my.node_child={nodelist:{},nodes:{},starttime:null,el:null,mode:"base",loadSource:function(n,t){var r=this,i,u;this.el=t;this.mode="base";this.nodelist={};this.nodes={};$.each(n,function(){r.nodelist[this.code]=this});i={code:"编号",name:"项目名称",level:0,parentcode:"",kemu:"科目"};u=new my.child_child(i);this.nodes=u;$.each(this.nodelist,function(){r.createChild(this)});this.nodes.open();$(t).append(this.nodes.fresh());this.nodelist["编号"]=i;this.nodelist["编号"].ref=this.nodes;this.bindEvent()},getChildByCode:function(n){return this.nodelist[n].ref},createChild:function(n){var t,i;if(n){if(t=new my.child_child(n),n.parentcode)if(this.nodelist[n.parentcode]&&this.nodelist[n.parentcode].ref)this.nodelist[n.parentcode].ref.addChild(t);else{if(!this.nodelist[n.parentcode])return;i=this.createChild(this.nodelist[n.parentcode]);i.addChild(t)}else n.parentcode="编号",t.parentcode="编号",this.nodes.addChild(t);return n.ref=t,t}},getTime:function(){return(new Date).getTime()},runTime:function(){console.log(this.getTime()-this.starttime)},bindEvent:function(){var n=this;$(".node_ul",this.el).unbind().bind("mouseover",function(){n.mode!="edit"&&$(this).css("background-color","#D3F0F1").find(".node_edit").show()});$(".node_ul",this.el).bind("mouseout",function(){$(this).css("background-color","#F5F5F5").find(".node_edit").hide()});$("a",this.el).unbind().bind("click",function(t){if(t.stopPropagation(),n.mode!="edit"){var i=$(this).data("code"),r=$(this).data("type");n.clickEvent(i,r)}});$(".node_ul",this.el).bind("click",function(){if(n.mode!="edit"){var t=$(this).data("code");t&&t!="编号"&&n.getChildByCode(t).changeStatus()}})},clickEvent:function(n,t){var i=this;console.log(n);t=="add"?i.addChild(n):t=="del"?confirm("是否确定删除？删除后将不可恢复！")&&my.util.send("yusuan->delItem",{code:n},function(t){if(t.status!=0)return my.view.message("删除失败！");i.nodelist[i.nodelist[n].parentcode].ref.delChild(n)}):t=="edit"&&i.editChild(n)},addChild:function(n){var u=this,i=this.getChildByCode(n),t;i.status==0&&i.changeStatus();var f=i.createChildCode(),o={code:f,name:"",parentcode:n,level:i.level+1},r=new my.child_child(o),e=i.getChildDom();e.length==0&&(i.getDom().after('<div class="node_childs" id="child'+i.code+'"><\/div>'),e=i.getChildDom());$(e).prepend(r.editHtml());t=e;this.mode="edit";$("a",t).unbind().bind("click",function(e){e.stopPropagation();var s=$(this).data("type"),h=$("input[name='code']",t).val();s=="editcancel"?($("#code"+f).remove(),u.mode="base",u.bindEvent()):s=="editsubmit"&&my.util.send("yusuan->addItem",{code:$("input[name='code']",t).val(),parentcode:n=="编号"?"":n,name:$("input[name='name']",t).val(),kemu:$("input[name='kemu']",t).val(),isitem:1},function(n){if(n.status==1)return my.view.message("请输入项目名称和编号！");if(n.status==2)return my.view.message("存在重复的项目编号，请更换重试！");if(n.status==3)return my.view.message("父类编号不存在！");if(n.status!=0)return my.view.message("添加失败，请重试！");my.view.message("添加成功！",1,function(){r.getDom().attr("id","code"+h);o.code=$("input[name='code']",t).val();r.code=$("input[name='code']",t).val();r.name=$("input[name='name']",t).val();r.kemu=$("input[name='kemu']",t).val();i.addChild(r);u.nodelist[f]=o;u.nodelist[f].ref=r;u.mode="base";r.setBaseType();u.bindEvent()})})})},editChild:function(n){var i=this,t=this.getChildByCode(n),r;this.mode="edit";t.setEditMode();r=t.getDom();$("a",r).unbind().bind("click",function(u){u.stopPropagation();var e=$(this).data("type"),f=$("input[name='code']",r).val();e=="editcancel"?(t.setBaseType(),i.mode="base",i.bindEvent()):e=="editsubmit"&&my.util.send("yusuan->editItem",{code:n,newcode:f,name:$("input[name='name']",r).val(),kemu:$("input[name='kemu']",r).val(),isitem:1},function(u){if(u.status==1)return my.view.message("请输入项目名称和编号！");if(u.status==2)return my.view.message("存在重复的项目编号，请更换重试！");if(u.status==3)return my.view.message("父类编号不存在！");if(u.status!=0)return my.view.message("添加失败，请重试！");my.view.message("修改成功！",1,function(){t.getDom().attr("id","code"+f);t.code=f;t.name=$("input[name='name']",r).val();t.kemu=$("input[name='kemu']",r).val();i.nodelist[f]={name:t.name,code:t.code,parentcode:t.parentcode};i.nodelist[f].ref=t;f!=n&&delete i.nodelist[n];i.mode="base";t.setBaseType();i.bindEvent()})})})}};my.child_child=function(n){n&&(this.code=n.code,this.name=n.name,this.kemu=n.kemu,this.parentcode=n.parentcode,this.level=n.level,this.status=n.status?1:0,this.childs=[])};my.child_child.prototype={createChildCode:function(){if($.isEmptyObject(this.childs))return this.code+"01";var n="";return $.each(this.childs,function(){n=parseInt(this.code)+1}),n},changeStatus:function(){return this.status==1?this.close():this.open()},addChild:function(n){return this.childs.push(n),n.setLevel(this.level+1),this},setLevel:function(n){return this.level=n,this},open:function(){return $.isEmptyObject(this.childs)||(this.status=1,$(".node_ico",this.getDom()).removeClass("ico_close").addClass("ico_open"),this.getChildDom().slideToggle()),this},close:function(){return $.isEmptyObject(this.childs)||(this.status=0,$(".node_ico",this.getDom()).removeClass("ico_open").addClass("ico_close"),this.getChildDom().slideToggle()),this},show:function(){$(this.getDom()).show();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.show()})},hide:function(){$(this.getDom()).hide();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.hide()})},remove:function(){this.getDom().remove();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.remove()})},delChild:function(n){var t=this;$.each(this.childs,function(i){if(this.code==n)return this.remove(),delete t.childs[i],!1})},fresh:function(){var t=this,n;return $.isEmptyObject(this.childs)?this.getHtml():(n=this.getHtml(),n+='<div class=node_childs id="child'+this.code+'" '+(this.level!=0?'style="display:none"':"")+">",$.each(this.childs,function(){n+=this.fresh()}),n+="<\/div>")},getHtml:function(){return'<div class="node_ul" id="code'+this.code+'" data-code="'+this.code+'"><div class="node_title">            <span class="node_space">'+new Array(this.level+1).join("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")+'<\/span>            <span class="'+(this.status?"ico_open":$.isEmptyObject(this.childs)?"ico_open":"ico_close")+' node_ico"><\/span>            <span class="node_title_txt">'+this.name+'<\/span><\/div>            <div class="node_code">'+this.code+'<\/div>            <div class="node_kemu">'+this.kemu+'<\/div>            <div class="node_submit"><a data-type="editsubmit" code="'+this.code+'">确认<\/a><a data-type="editcancel" code="'+this.code+'">取消<\/a><\/div>            <div class="node_edit"><a data-type="add" data-code="'+this.code+'">[新增子类]<\/a>            <a data-type="edit" data-code="'+this.code+'">[修改]<\/a>            <a data-type="del" data-code="'+this.code+'">[删除]<\/a><\/div><\/div>'},getDom:function(){return $("#code"+this.code)},getChildDom:function(){return $("#child"+this.code)},setBaseType:function(){var n=this.getDom();$(".node_title_txt",n).html(this.name);$(".node_code",n).html(this.code);$(".node_kemu",n).html(this.kemu?this.kemu:"");$(".node_submit",n).hide();$(n).data("code",this.code);$("a",n).data("code",this.code)},setEditMode:function(){var n=this.getDom();return $(".node_title_txt",n).html('<input type="text" name="name" value="'+this.name+'" style="width:150px;">'),$(".node_code",n).html('<input type="text" name="code" value="'+this.code+'" style="width:80px;">'),$(".node_kemu",n).html('<input type="text" name="kemu" value="'+(this.kemu?this.kemu:"")+'" style="width:80px;">'),$(".node_edit",n).hide(),$(".node_submit",n).show(),this},editHtml:function(){return'<div class="node_ul" id="code'+this.code+'" data-code="'+this.code+'"><div class="node_title">            <span class="node_space">'+new Array(this.level+1).join("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")+'<\/span>            <span class="ico_open node_ico"><\/span>            <span class="node_title_txt"><input type="text" name="name" value="" style="width:150px;"><\/span><\/div>            <div class="node_code"><input type="text" name="code" value="'+this.code+'" style="width:80px;"><\/div>            <div class="node_kemu"><input type="text" name="kemu" value="'+(this.kemu?this.kemu:"")+'" style="width:80px;"><\/div>            <div class="node_submit" style="display:block"><a data-type="editsubmit" code="'+this.code+'">确认<\/a><a data-type="editcancel" code="'+this.code+'">取消<\/a><\/div>            <div class="node_edit"><a data-type="add" data-code="'+this.code+'">[新增子类]<\/a>            <a data-type="edit" data-code="'+this.code+'">[修改]<\/a>            <a data-type="del" data-code="'+this.code+'">[删除]<\/a><\/div><\/div>'}};my.node_data={nodelist:{},nodes:{},starttime:null,el:null,mode:"base",loadSource:function(n,t){var r=this,i,u;this.el=t;this.mode="base";this.nodelist={};this.nodes={};$.each(n,function(){r.nodelist[this.code]=this});i={code:"编号",name:"项目名称",level:0,parentcode:"",kemu:"科目",M1:"一月",M2:"二月",M3:"三月",M4:"四月",M5:"五月",M6:"六月",M7:"七月",M8:"八月",M9:"九月",M10:"十月",M11:"十一月",M12:"十二月",YearAlarm:"全年"};u=new my.child_data(i);this.nodes=u;$.each(this.nodelist,function(){r.createChild(this)});this.nodes.open();$(t).append(this.nodes.fresh());this.nodelist["编号"]=i;this.nodelist["编号"].ref=this.nodes;this.bindEvent()},getChildByCode:function(n){return this.nodelist[n].ref},createChild:function(n){var t,i;if(n){if(t=new my.child_data(n),n.parentcode)if(this.nodelist[n.parentcode]&&this.nodelist[n.parentcode].ref)this.nodelist[n.parentcode].ref.addChild(t);else{if(!this.nodelist[n.parentcode])return;i=this.createChild(this.nodelist[n.parentcode]);i.addChild(t)}else t.parentcode="编号",this.nodes.addChild(t);return n.ref=t,t}},getTime:function(){return(new Date).getTime()},runTime:function(){console.log(this.getTime()-this.starttime)},bindEvent:function(){var n=this;$(".node_ul",this.el).unbind().bind("mouseover",function(){n.mode!="edit"&&$(this).css("background-color","#D3F0F1")});$(".node_ul",this.el).bind("mouseout",function(){$(this).data("isclick")||$(this).css("background-color","#f5f5f5")});$(".node_ico",this.el).bind("click",function(){if(n.mode!="edit"){var t=$(this).parent().parent().data("code");t&&t!="编号"&&n.getChildByCode(t).changeStatus()}})}};my.child_data=function(n){n&&(this.code=n.code,this.name=n.name,this.kemu=n.kemu?n.kemu:"",this.parentcode=n.parentcode,this.level=n.level,this.M1=n.M1?n.M1:"",this.M2=n.M2?n.M2:"",this.M3=n.M3?n.M3:"",this.M4=n.M4?n.M4:"",this.M5=n.M5?n.M5:"",this.M6=n.M6?n.M6:"",this.M7=n.M7?n.M7:"",this.M8=n.M8?n.M8:"",this.M9=n.M9?n.M9:"",this.M10=n.M10?n.M10:"",this.M11=n.M11?n.M11:"",this.M12=n.M12?n.M12:"",this.YearAlarm=n.YearAlarm?n.YearAlarm:"",this.status=n.status?0:1,this.childs=[])};my.child_data.prototype={createChildCode:function(){if($.isEmptyObject(this.childs))return this.code+"01";var n="";return $.each(this.childs,function(){n=parseInt(this.code)+1}),n},changeStatus:function(){return this.status==1?this.close():this.open()},addChild:function(n){return this.childs.push(n),n.setLevel(this.level+1),this},setLevel:function(n){return this.level=n,this},open:function(){return $.isEmptyObject(this.childs)||(this.status=1,$(".node_ico",this.getDom()).removeClass("ico_close").addClass("ico_open"),this.getChildDom().slideToggle()),this},close:function(){return $.isEmptyObject(this.childs)||(this.status=0,$(".node_ico",this.getDom()).removeClass("ico_open").addClass("ico_close"),this.getChildDom().slideToggle()),this},show:function(){$(this.getDom()).show();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.show()})},hide:function(){$(this.getDom()).hide();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.hide()})},remove:function(){this.getDom().remove();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.remove()})},delChild:function(n){var t=this;$.each(this.childs,function(i){if(this.id==n)return this.remove(),delete t.childs[i],!1})},fresh:function(){var t=this,n;return $.isEmptyObject(this.childs)?this.getHtml():(n=this.getHtml(),n+='<div class=node_childs id="child_more'+this.code+'">',$.each(this.childs,function(){n+=this.fresh()}),n+="<\/div>")},getHtml:function(){return'<div class="node_ul" id="code_more'+this.code+'" data-code="'+this.code+'"><div class="node_title">            <span class="node_space">'+new Array(this.level+1).join("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")+'<\/span>            <span class="'+(this.status?"ico_open":$.isEmptyObject(this.childs)?"ico_open":"ico_close")+' node_ico"><\/span>            <span class="node_title_txt">'+this.name+'<\/span><\/div>            <div class="node_code">'+this.code+'<\/div><div class="node_kemu">'+this.kemu+'<\/div><div class="node_month" data-field="M1">'+this.M1+'<\/div><div class="node_month" data-field="M2">'+this.M2+'<\/div><div class="node_month" data-field="M3">'+this.M3+'<\/div><div class="node_month" data-field="M4">'+this.M4+'<\/div><div class="node_month" data-field="M5">'+this.M5+'<\/div><div class="node_month" data-field="M6">'+this.M6+'<\/div><div class="node_month" data-field="M7">'+this.M7+'<\/div><div class="node_month" data-field="M8">'+this.M8+'<\/div><div class="node_month" data-field="M9">'+this.M9+'<\/div><div class="node_month" data-field="M10">'+this.M10+'<\/div><div class="node_month" data-field="M11">'+this.M11+'<\/div><div class="node_month" data-field="M12">'+this.M12+'<\/div><div class="node_month" data-field="YearAlarm">'+this.YearAlarm+"<\/div>            <\/div>"},getDom:function(){return $("#code_more"+this.code)},getChildDom:function(){return $("#child_more"+this.code)},setBaseType:function(){var n=this.getDom();$(".node_title_txt",n).html(this.name);$(".node_code",n).html(this.code);$(".node_submit",n).hide();$(n).data("code",this.code);$("a",n).data("code",this.code)}};my.node_do={nodelist:{},nodes:{},starttime:null,el:null,mode:"base",loadSource:function(n,t){var r=this,i,u;this.el=t;this.mode="base";this.nodelist={};this.nodes={};$.each(n,function(){r.nodelist[this.code]=this});i={code:"编号",name:"项目名称",level:0,parentcode:"",kemu:"科目",month:"本月预算",YearAlarm:"全年预算"};u=new my.child_do(i);this.nodes=u;$.each(this.nodelist,function(){r.createChild(this)});this.nodes.open();$(t).append(this.nodes.fresh());this.nodelist["编号"]=i;this.nodelist["编号"].ref=this.nodes;this.bindEvent()},getChildByCode:function(n){return this.nodelist[n].ref},createChild:function(n){var t,i;if(n){if(t=new my.child_do(n),n.parentcode)if(this.nodelist[n.parentcode]&&this.nodelist[n.parentcode].ref)this.nodelist[n.parentcode].ref.addChild(t);else{if(!this.nodelist[n.parentcode])return;i=this.createChild(this.nodelist[n.parentcode]);i.addChild(t)}else t.parentcode="编号",this.nodes.addChild(t);return n.ref=t,t}},getTime:function(){return(new Date).getTime()},runTime:function(){console.log(this.getTime()-this.starttime)},bindEvent:function(){var n=this;$(".node_ul",this.el).unbind().bind("mouseover",function(){n.mode!="edit"&&$(this).css("background-color","#D3F0F1")});$(".node_ul",this.el).bind("mouseout",function(){$(this).data("isclick")||$(this).css("background-color","#f5f5f5")});$(".node_ico",this.el).bind("click",function(){if(n.mode!="edit"){var t=$(this).parent().parent().data("code");t&&t!="编号"&&n.getChildByCode(t).changeStatus()}})}};my.child_do=function(n){n&&(this.code=n.code,this.name=n.name,this.kemu=n.kemu?n.kemu:"",this.parentcode=n.parentcode,this.level=n.level,this.month=n.month?n.month:"",this.YearAlarm=n.YearAlarm?n.YearAlarm:"",this.status=n.status?0:1,this.childs=[])};my.child_do.prototype={createChildCode:function(){if($.isEmptyObject(this.childs))return this.code+"01";var n="";return $.each(this.childs,function(){n=parseInt(this.code)+1}),n},changeStatus:function(){return this.status==1?this.close():this.open()},addChild:function(n){return this.childs.push(n),n.setLevel(this.level+1),this},setLevel:function(n){return this.level=n,this},open:function(){return $.isEmptyObject(this.childs)||(this.status=1,$(".node_ico",this.getDom()).removeClass("ico_close").addClass("ico_open"),this.getChildDom().slideToggle()),this},close:function(){return $.isEmptyObject(this.childs)||(this.status=0,$(".node_ico",this.getDom()).removeClass("ico_open").addClass("ico_close"),this.getChildDom().slideToggle()),this},show:function(){$(this.getDom()).show();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.show()})},hide:function(){$(this.getDom()).hide();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.hide()})},remove:function(){this.getDom().remove();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.remove()})},delChild:function(n){var t=this;$.each(this.childs,function(i){if(this.id==n)return this.remove(),delete t.childs[i],!1})},fresh:function(){var t=this,n;return $.isEmptyObject(this.childs)?this.getHtml():(n=this.getHtml(),n+='<div class=node_childs id="child_more'+this.code+'">',$.each(this.childs,function(){n+=this.fresh()}),n+="<\/div>")},getHtml:function(){return'<div class="node_ul" id="code_more'+this.code+'" data-code="'+this.code+'"><div class="node_title">            <span class="node_space">'+new Array(this.level+1).join("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")+'<\/span>            <span class="'+(this.status?"ico_open":$.isEmptyObject(this.childs)?"ico_open":"ico_close")+' node_ico"><\/span>            <span class="node_title_txt">'+this.name+'<\/span><\/div>            <div class="node_code">'+this.code+'<\/div><div class="node_kemu">'+this.kemu+'<\/div><div class="node_month">'+this.month+'<\/div><div class="node_month">'+this.YearAlarm+"<\/div>            <\/div>"},getDom:function(){return $("#code_more"+this.code)},getChildDom:function(){return $("#child_more"+this.code)},setBaseType:function(){var n=this.getDom();$(".node_title_txt",n).html(this.name);$(".node_code",n).html(this.code);$(".node_submit",n).hide();$(n).data("code",this.code);$("a",n).data("code",this.code)}};my.node_rs={nodelist:{},nodes:{},starttime:null,el:null,mode:"base",loadSource:function(n,t){var r=this,i,u;this.el=t;this.mode="base";this.nodelist={};this.nodes={};$.each(n,function(){r.nodelist[this.id]=this});i={id:"编号",department:"项目名称",level:0,parent_id:""};u=new my.child_rs(i);this.nodes=u;$.each(this.nodelist,function(){r.createChild(this)});this.nodes.open();$(t).append(this.nodes.fresh());this.nodelist["编号"]=i;this.nodelist["编号"].ref=this.nodes;this.bindEvent()},getChildByCode:function(n){return this.nodelist[n].ref},createChild:function(n){var t,i;if(n){if(t=new my.child_rs(n),n.parent_id)if(this.nodelist[n.parent_id]&&this.nodelist[n.parent_id].ref)this.nodelist[n.parent_id].ref.addChild(t);else{if(!this.nodelist[n.parent_id])return;i=this.createChild(this.nodelist[n.parent_id]);i.addChild(t)}else n.parent_id="编号",t.parent_id="编号",this.nodes.addChild(t);return n.ref=t,t}},getTime:function(){return(new Date).getTime()},runTime:function(){},bindEvent:function(){var n=this;$(".node_ul",this.el).unbind().bind("mouseover",function(){n.mode!="edit"&&$(this).css("background-color","#D3F0F1").find(".node_edit").show()});$(".node_ul",this.el).bind("mouseout",function(){$(this).css("background-color","#F5F5F5").find(".node_edit").hide()});$("a",this.el).unbind().bind("click",function(t){if(t.stopPropagation(),n.mode!="edit"){var i=$(this).data("code"),r=$(this).data("type");n.clickEvent(i,r)}});$(".node_ul",this.el).bind("click",function(){if(n.mode!="edit"){var t=$(this).data("code");t&&t!="编号"&&n.getChildByCode(t).changeStatus()}})},clickEvent:function(n,t){var i=this;t=="add"?i.addChild(n):t=="del"?confirm("是否确定删除？删除后将不可恢复！")&&my.util.send("personnel->delDepartmentInfo",{id:n},function(t){if(t.status!=0)return my.view.message("删除失败！");i.nodelist[i.nodelist[n].parent_id].ref.delChild(n)}):t=="edit"?i.editChild(n):t=="zhiwei"&&my.zhiwei.show(i.nodelist[n])},addChild:function(n){var r=this,t=this.getChildByCode(n),u;t.status==0&&t.changeStatus();var o=t.createChildCode(),e={id:o,name:"",parent_id:n,level:t.level+1},i=new my.child_rs(e),f=t.getChildDom();f.length==0&&(t.getDom().after('<div class="node_rss" id="child'+t.id+'"><\/div>'),f=t.getChildDom());$(f).prepend(i.editHtml());u=f;this.mode="edit";$("a",u).unbind().bind("click",function(f){f.stopPropagation();var h=$(this).data("type"),s=$("input[name='code']",u).val();h=="editcancel"?($("#code"+o).remove(),r.mode="base",r.bindEvent()):h=="editsubmit"&&my.util.send("personnel->add_department",{parent_id:n=="编号"?"":n,department:$("input[name='name']",u).val()},function(n){if(n.status!=0)return my.view.message("添加失败！");my.view.message("添加成功！",1,function(){s=n.id;i.getDom().attr("id","code"+s);e.id=s;i.id=s;i.department=$("input[name='name']",u).val();t.addChild(i);r.nodelist[s]=e;r.nodelist[s].ref=i;r.mode="base";i.setBaseType();r.bindEvent()})})})},editChild:function(n){var i=this,t=this.getChildByCode(n),r;this.mode="edit";t.setEditMode();r=t.getDom();$("a",r).unbind().bind("click",function(u){u.stopPropagation();var f=$(this).data("type");f=="editcancel"?(t.setBaseType(),i.mode="base",i.bindEvent()):f=="editsubmit"&&my.util.send("personnel->editDepartment",{id:n,department:$("input[name='name']",r).val()},function(u){if(u.status!=0)return my.view.message("修改失败！");my.view.message("修改成功！",1,function(){t.getDom().attr("id","code"+n);t.department=$("input[name='name']",r).val();i.nodelist[n].name=t.department;i.mode="base";t.setBaseType();i.bindEvent()})})})}};my.child_rs=function(n){n&&(this.id=n.id,this.department=n.department,this.kemu=n.kemu,this.parent_id=n.parent_id,this.level=n.level,this.disedit=n.disedit,this.status=n.status?0:1,this.childs=[])};my.child_rs.prototype={createChildCode:function(){return""},changeStatus:function(){return this.status==1?this.close():this.open()},addChild:function(n){return this.childs.push(n),n.setLevel(this.level+1),this},setLevel:function(n){return this.level=n,this},open:function(){return $.isEmptyObject(this.childs)||(this.status=1,$(".node_ico",this.getDom()).removeClass("ico_close").addClass("ico_open"),this.getChildDom().slideToggle()),this},close:function(){return $.isEmptyObject(this.childs)||(this.status=0,$(".node_ico",this.getDom()).removeClass("ico_open").addClass("ico_close"),this.getChildDom().slideToggle()),this},show:function(){$(this.getDom()).show();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.show()})},hide:function(){$(this.getDom()).hide();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.hide()})},remove:function(){this.getDom().remove();$.isEmptyObject(this.childs)||$.each(this.childs,function(){this.remove()})},delChild:function(n){var t=this;$.each(this.childs,function(i){if(this.id==n)return this.remove(),delete t.childs[i],!1})},fresh:function(){var t=this,n;return $.isEmptyObject(this.childs)?this.getHtml():(n=this.getHtml(),n+='<div class=node_rss id="child'+this.id+'" >',$.each(this.childs,function(){n+=this.fresh()}),n+="<\/div>")},getHtml:function(){var n='<div class="node_ul" id="code'+this.id+'" data-code="'+this.id+'"><div class="node_title">            <span class="node_space">'+new Array(this.level+1).join("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")+'<\/span>            <span class="'+(this.status?"ico_open":$.isEmptyObject(this.childs)?"ico_open":"ico_close")+' node_ico"><\/span>            <span class="node_title_txt">'+this.department+'<\/span><\/div>            <div class="node_code">'+this.id+'<\/div>            <div class="node_submit"><a data-type="editsubmit" code="'+this.id+'">确认<\/a><a data-type="editcancel" code="'+this.id+'">取消<\/a><\/div>            <div class="node_edit">';return n+=this.id=="编号"?"":'<a data-type="zhiwei" data-code="'+this.id+'">[岗位管理]<\/a>',n+=this.disedit?"":'<a data-type="add" data-code="'+this.id+'">[新增子类]<\/a>',n+=this.id=="编号"||this.disedit?"":'<a data-type="edit" data-code="'+this.id+'">[修改]<\/a>            <a data-type="del" data-code="'+this.id+'">[删除]<\/a>',n+"<\/div><\/div>"},getDom:function(){return $("#code"+this.id)},getChildDom:function(){return $("#child"+this.id)},setBaseType:function(){var n=this.getDom();$(".node_title_txt",n).html(this.department);$(".node_code",n).html(this.id);$(".node_submit",n).hide();$(n).data("code",this.id);$("a",n).data("code",this.id)},setEditMode:function(){var n=this.getDom();return $(".node_title_txt",n).html('<input type="text" name="name" value="'+this.department+'" style="width:150px;">'),$(".node_code",n).html(this.id),$(".node_edit",n).hide(),$(".node_submit",n).show(),this},editHtml:function(){return'<div class="node_ul" id="code'+this.id+'" data-code="'+this.id+'"><div class="node_title">            <span class="node_space">'+new Array(this.level+1).join("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")+'<\/span>            <span class="ico_open node_ico"><\/span>            <span class="node_title_txt"><input type="text" name="name" value="" style="width:150px;"><\/span><\/div>            <div class="node_code">'+this.id+'<\/div>            <div class="node_submit" style="display:block"><a data-type="editsubmit" code="'+this.id+'">确认<\/a><a data-type="editcancel" code="'+this.id+'">取消<\/a><\/div>            <div class="node_edit"><a data-type="add" data-code="'+this.id+'">[新增子类]<\/a>            <a data-type="edit" data-code="'+this.id+'">[修改]<\/a>            <a data-type="del" data-code="'+this.id+'">[删除]<\/a><\/div><\/div>'}};my.zhiwei={div:null,goodsList:[],searchResult:[],perpage:10,quick_search:!0,getOne:function(n,t){this.showList(n,t)},setEvent:function(n){var t=this;$(".submit_order",this.div).click(function(){n&&typeof n=="function"&&n($(this).data("id"));t.hide()})},show:function(n){var i=this;this.info=n;var t=document.createElement("div"),u=document.documentElement.clientWidth||document.body.clientWidth,r=document.documentElement.clientHeight||document.body.clientHeight,f=(u-900)/2,e=(r-500)/2;this.bg=document.createElement("div");this.bg.style.cssText="position:absolute;left:0px;top:0px;width:100%;height:"+r+"px;filter:alpha(opacity=50);-moz-opacity:0.5;-khtml-opacity: 0.5;opacity: 0.5;background:#000;z-index:10;";t.style.cssText="position:absolute;left:"+f+"px;top:"+e+"px;width:880px;height:500px;border:1px solid #f4f4f4;background:#fff;overflow:scroll;z-index:999;display:none;";$(t).append('<table border="0" cellspacing="0" id="goods_list" cellpadding="0" id="goods_list" style="width:860px;"  class="table_goodslist" style="line-height:24px;"><tr>                    <th colspan="6" class="txtleft" style="background:#dedede;border-bottom:1px solid #ccc;border-top:1px solid #ccc;">                        <span style="float:left;"><b>岗位管理<\/b> &nbsp;&nbsp;&nbsp;&nbsp;当前部门：<b>'+n.department+'<\/b> &nbsp;&nbsp;&nbsp;&nbsp;<\/span><input type="text" style="width:150px;" name="new_job"><a class="city_submit" id="addnew">新增岗位<\/a>                        <span style="float:right"><a class="close">关闭<\/a><\/span>                    <\/th>                <\/tr>                <tr>                    <th width="100">ID<\/th>                    <th class="txtleft">岗位<\/th>                    <th width="120">编制<\/th>                    <th width="70">岗位工资<\/th>                    <th width="100">岗位级别<\/th>                    <th width="150">操作<\/th>                <\/tr><tr><th colspan="6">正在获取岗位信息，请稍候……<\/th><\/tr><\/table>');$(document.body).append(this.bg);$(document.body).append(t);this.div=t;$(this.bg).bind("click",function(){i.hide()});$(".close",t).click(function(){i.hide()});$("#addnew").click(function(){var r=$("input[name='new_job']",t).val(),n;if(!r)return my.view.message("请输入新岗位名称！");my.view.load(1);n=i.getArges();n.job=r;my.util.send("personnel->add_job",n,function(n){if(n.status!==0)return my.view.message("新增岗位失败！");my.view.message("新增岗位成功！",1,function(){$("input[name='new_job']",t).val("");i.fresh()})})});this.fresh();$(t).fadeIn()},getArges:function(){var n={};return this.info.type=="store"?n.store_id=this.info.id:this.info.type=="bag"?n.bag_id=this.info.id:this.info.type=="chejian"?n.chejian_id=this.info.id:n.department_id=this.info.id,n},fresh:function(){var n=this,t=this.getArges();my.view.load(1);my.util.send("personnel->job_list",t,function(t){my.view.load();n.list=t.list;n.showList()})},showList:function(){var t=this,n;$("tr",this.div).each(function(n){if(n<2)return!0;$(this).remove()});n="";$.isEmptyObject(this.list)?n='<tr><th colspan="6">目前没有岗位信息<\/th><\/tr>':$.each(this.list,function(){var i=this,t;n+="<tr>                    <th>"+this.id+'<\/th>                    <th class="txtleft">'+this.job+"<\/th>                    <th>"+this.plan_nums+"<\/th>                    <th>"+this.wage+"<\/th>";t=["专员","主管","经理","总监"];n+="<th>"+t[this.job_level-1]+"<\/th>";n+='<th><a data-type="edit" style="padding-right:10px;" data-id="'+this.id+'">修改<\/a><a data-type="del" style="padding-right:10px;" data-id="'+this.id+'">删除<\/a><a data-type="history" data-id="'+this.id+'">历史记录<\/a><\/th>                <\/tr>'});n=$(n);$("a",n).bind("click",function(){var i=$(this).data("id"),e=$(this).data("type"),n,f,o,r,u;if(e=="edit"){n=$(this).parent().parent().find("th");u=t.getListInfo(i);n.eq(1).html('<input type="text" value="'+u.job+'" style="width:150px;" name="job">');n.eq(2).html('<input type="text" value="'+u.plan_nums+'" style="width:100px;" name="plan_nums">');n.eq(3).html('<input type="text" value="'+u.wage+'" style="width:60px;" name="wage">');f="";f+='<select name="job_level">';o=["专员","主管","经理","总监"];$.each(o,function(n){f+=u.job_level==n+1?'<option value="'+(n+1)+'" selected>'+this+"<\/option>":'<option value="'+(n+1)+'" >'+this+"<\/option>"});f+="<\/select>";n.eq(4).html(f);n.eq(5).html('<a data-type="editsubmit" style="padding-right:10px;">确认修改<\/a> <a data-type="cancel">取消<\/a>');n.eq(5).find("a").bind("click",function(){var u=$(this).data("type");if(u=="cancel")t.showList();else{var f=$("input[name='job']",n).val(),e=$("input[name='plan_nums']",n).val(),o=$("input[name='wage']",n).val(),s=$("select[name='job_level']",n).val(),r=t.getArges();r.id=i;r.job=f;r.plan_nums=e;r.wage=o;r.job_level=s;my.util.send("personnel->edit_job",r,function(n){if(n.status!=0)return my.view.message("修改失败！");my.view.message("修改成功！",1,function(){t.fresh()})})}});return}if(e=="history"){if(r="",$(".history_"+i).length>0){$(".history_"+i).remove();return}u=t.getListInfo(i);$.each(u.list,function(){r+='<tr class="history_'+i+'">';r+='<td colspan="2"><\/td><td>'+this.plan_nums+"<\/td>";r+="<td>"+this.wage+"<\/td>";r+="<td>"+["专员","主管","经理","总监"][this.job_level-1]+"<\/td>";r+="<td>"+this.begin_time+'  [<a data-id="'+this.id+'">删除<\/a>]<\/td>';r+="<\/tr>"});$(this).parent().parent().after(r);$(".history_"+i+" a").click(function(){var n=this,t=$(this).data("id");my.view.load(1);my.util.send("personnel->del_job_cache_info",{id:t},function(t){if(t.status!=0)return my.view.message("删除失败！");my.view.message("删除历史记录成功！",1,function(){$(n).parent().parent().remove()})})});return}if(e=="del"){confirm("确认删除职位吗？如该职位存在数据，将导致数据混乱，请谨慎操作！")&&(my.view.load(1),my.util.send("personnel->del_job_info",{id:i},function(n){if(n.status==1)return my.view.message("该职位已有员工，请先调整该员工职位后再进行删除操作！");if(n.status!=0)return my.view.message("删除职位失败！");my.view.message("删除职位成功！",1,function(){t.fresh()})}));return}});$("table",this.div).append(n)},getListInfo:function(n){var t;return $.each(this.list,function(){if(this.id==n)return t=this}),t},showList1:function(n,t){var u,f,e,o;this.goodsList=n;this.searchResult=n;var r=this,i=document.createElement("div"),s=document.documentElement.clientWidth||document.body.clientWidth,h=document.documentElement.clientHeight||document.body.clientHeight,c=(s-900)/2,l=(h-500)/2;i.style.cssText="position:absolute;left:"+c+"px;top:"+l+"px;width:880px;height:500px;border:1px solid #f4f4f4;background:#fff;overflow:scroll;z-index:999;display:none;";u="";$.each(my.departments,function(){u+='<option value="'+this.department+'">'+this.department+"<\/option>"});f="";$.each(my.stores,function(){f+='<option value="'+this.store_id+'">'+this.store_name+"<\/option>"});e="";$.each(my.bags,function(){e+='<option value="'+this.bag_id+'">'+this.bag_name+"<\/option>"});o="";$.each(my.chejians,function(){o+='<option value="'+this.chejian_id+'">'+this.chejian_name+"<\/option>"});$(i).append('<table border="0" cellspacing="0" cellpadding="0" id="goods_list" style="width:860px;"  class="table_goodslist"><tr>                    <th colspan="5" class="txtleft" style="background:#dedede;border-bottom:1px solid #ccc;border-top:1px solid #ccc;">                        <span style="float:left;"><b>选择人员<\/b> &nbsp;&nbsp;&nbsp;&nbsp;                        <input type="checkbox" id="quick_search" checked> 快速查询                          <a class="ico tips"><div class="tips_content" style="width:300px;"><div class="tips_arrow">◆<\/div>                            支持按                            <b><font color="red">ID<\/font><\/b>、                            <b><font color="red">姓名<\/font><\/b>、                            <b><font color="red">姓名拼音首字母<\/font><\/b>搜索。<br>                            支持多关键词搜索，关键词之间以空格分开。<br>                            选中快速查询后，可即输即查，无需点击 <b><font color="red">查询<\/font><\/b> 按钮。<br>                            如电脑配置较低，出现卡机情况，请去掉“快速查询”勾选，输入关键词后，点击“查询”按钮进行搜索。                         <\/div><\/a><select name="department"><option value="">选择部门<\/option>'+u+'<\/select><select name="store" style="display:none"><option value="">选择门店<\/option>'+f+'<\/select><select name="bag" style="display:none"><option value="">选择仓库<\/option>'+e+'<\/select><select name="chejian" style="display:none"><option value="">选择车间<\/option>'+o+'<\/select>                        关键词：<input type="text" id="keyword" class="input3" style="width:100px;">                         <a  class="city_submit" id="search_start">查询<\/a>                        <\/span><span style="float:right"><a class="close">关闭<\/a><\/span>                        <\/th>                <\/tr>                <tr>                    <th width="100">ID<\/th>                    <th>姓名<\/th>                    <th width="120">部门<\/th>                    <th width="70">职位<\/th>                    <th width="80">操作<\/th>                <\/tr><\/table>');$(document.body).append(i);this.div=i;$("select[name='department']",i).bind("change",function(){var n=$(this).val();$("select[name='store']",i).hide();$("select[name='bag']",i).hide();$("select[name='chejian']",i).hide();n=="门店"&&$("select[name='store']",i).show();n=="仓库"&&$("select[name='bag']",i).show();n=="加工中心"&&$("select[name='chejian']",i).show();r.search($("#keyword").val().trim(),t,n)});$("select[name='store'],select[name='bag'],select[name='chejian']",i).bind("change",function(){var n=$("select[name='department']",i).val(),u=$(this).val();r.search($("#keyword").val().trim(),t,n,u)});$("#keyword",i).bind("keyup",function(){if($("#quick_search",i).attr("checked")){var n=$("select[name='department']",i).val(),u=$("select[name='store']",i).val()||$("select[name='bag']",i).val()||$("select[name='chejian']",i).val();r.search($(this).val().trim(),t,n,u)}});$("#search_start",i).bind("click",function(){var n=$("select[name='department']",i).val(),u=$("select[name='store']",i).val()||$("select[name='bag']",i).val()||$("select[name='chejian']",i).val();r.search($("#keyword").val().trim(),t,n,u)});$("#quick_search").click(function(){r.quick_search=$(this).attr("checked")?!0:!1});$(".tips",i).unbind().bind("mouseover click",function(){$("div",this).stop().show()});$(".tips",i).bind("mouseout",function(){$("div",this).stop().hide()});$("#fullbg").height($(document).height()).show().unbind().bind("click",function(){r.hide()});$(".close",i).click(function(){r.hide()});$(i).fadeIn();this.search("",t)},hide:function(){$(this.div).remove();$(this.bg).remove()},search:function(n,t,i,r){var e=n.split(" "),u,f=this.goodsList,o=this;$.each(e,function(){if(n=this,!n)return!0;u=[];var t=o.getKeyType(n);$.each(f,function(){if(i&&this.department!=i||i=="门店"&&r&&this.store_id!=r||i=="加工中心"&&r&&this.chejian_id!=r||i=="仓库"&&r&&this.bag_id!=r||this.goods_type)return!0;if(t==1)this.id.toString().indexOf(n.toString())>-1&&u.push(this);else if(t==2){var f=this;$.each(this.py,function(){if(this.indexOf(n.toUpperCase().toString())>-1)return u.push(f),!1})}else t==3&&this.true_name.toString().indexOf(n.toString())>-1&&u.push(this)});f=u});this.searchResult=u;this.insertTable(u,1,t)},getKeyType:function(n){if(!isNaN(n))return 1;return/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi.exec(n)?3:2},insertTable:function(n,t,i){var f=this,o=this.perpage,s,c,h,u,r,e;for(t||(t=1),s=Math.ceil(n.length/o),t<1&&(t=1),t>s&&(t=s),$("tr",this.div).each(function(n){if(n<2)return!0;$(this).remove()}),c=document.createDocumentFragment(),h=1;h<=o;h++)u=document.createElement("tr"),r=n[(t-1)*o+h-1]?n[(t-1)*o+h-1]:{id:"--"},u.appendChild(this.th(r.id)),u.appendChild(this.td(r.true_name)),u.appendChild(this.td(r.department=="门店"?"门店（"+getStoreName(r.store_id)+"）":r.department=="仓库"?"仓库（"+getBagName(r.bag_id)+"）":r.department=="加工中心"?"加工中心（"+getChejianName(r.chejian_id)+"）":r.department)),u.appendChild(this.td(r.job)),r.baozhuang_num=r.baozhuang_num?r.baozhuang_num:"",r.order_nums=r.order_nums?r.order_nums:"",r.goods_type?u.appendChild(f.td(r.goods_type)):r.id=="--"?u.appendChild(f.td(r.id)):u.appendChild(f.td('<a  class="submit_order" data-code="'+r.id+'" data-id="'+r.id+'">选择<\/a>')),c.appendChild(u);$("table",this.div).append(c);e='<tr class="showpage"><th colspan="5">';e+='<a data-page="1">首页<\/a>';e+='<a data-page="'+(t-1)+'">上一页<\/a>';e+='<a data-page="'+(t+1)+'">下一页<\/a>';e+='<a data-page="'+s+'">尾页<\/a>';e+="共有"+n.length+"条记录&nbsp;&nbsp;&nbsp;&nbsp;当前第"+t+"页/"+s+"页&nbsp;&nbsp;&nbsp;&nbsp;";e+='每页显示<input type="text" style="width:30px;" id="perpage" value="'+o+'">条记录';$("table",this.div).append(e);this.setEvent(i);$(".showpage a",this.div).click(function(){var n=$(this).data("page");f.insertTable(f.searchResult,n,i)});$("#perpage",this.div).bind("change",function(){var n=parseInt($(this).val());n||(n=10);n<1&&(n=1);n>100&&(n=100);f.perpage=n;f.insertTable(f.searchResult,t,i)});$("table tr",this.div).bind("mouseover",function(){$("td",this).css("background-color","#D3F0F1")});$("table tr",this.div).bind("mouseout",function(){$("td",this).css("background-color","#fff")})},td:function(n,t){var i=document.createElement("td"),r,u;return t||(t={}),r=t.classname,u=t.colspan,r&&(i.className=r),u&&(i.colSpan=u),n||(n="&nbsp;"),i.innerHTML=n,i},th:function(n){var t=document.createElement("th");return n||(n="&nbsp;"),t.innerHTML=n,t}};